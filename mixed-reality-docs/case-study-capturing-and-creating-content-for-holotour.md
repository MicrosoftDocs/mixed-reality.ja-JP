---
title: ケーススタディ-HoloTour
description: Microsoft HoloLens の HoloTour は、世界中のアイコンの位置をイマーシブ3D で表示します。 このケーススタディでは、HoloTour に使用するコンテンツをキャプチャして作成するプロセスについて説明します。
author: dannyaskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: HoloTour、HoloLens、Windows Mixed Reality
ms.openlocfilehash: 59c3dffd48009aa792643ea27b59f8f6f85b64d7
ms.sourcegitcommit: d6ac8f1f545fe20cf1e36b83c0e7998b82fd02f8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/14/2020
ms.locfileid: "81278190"
---
# <a name="case-study---holotour"></a><span data-ttu-id="cf6c1-105">ケーススタディ-HoloTour</span><span class="sxs-lookup"><span data-stu-id="cf6c1-105">Case study - HoloTour</span></span>

<span data-ttu-id="cf6c1-106">Microsoft HoloLens の HoloTour は、世界中のアイコンの位置をイマーシブ3D で表示します。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-106">HoloTour for Microsoft HoloLens provides immersive 3D personal tours of iconic locations around the world.</span></span> <span data-ttu-id="cf6c1-107">このプロジェクトに携わっているデザイナー、アーティスト、プロデューサー、オーディオデザイナー、および開発者が発見したので、既知の場所の convincingly リアル3D レンダリングを作成するには、creative と技術的な wizardry を独自に組み合わせて使用します。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-107">As the designers, artists, producers, audio designers, and developers working on this project found out, creating a convincingly real 3D rendering of a well-known location takes a unique blend of creative and technological wizardry.</span></span> <span data-ttu-id="cf6c1-108">このケーススタディでは、HoloTour に使用するコンテンツをキャプチャして作成するプロセスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-108">This case study will walk through the process of capturing and creating the content used for HoloTour.</span></span>

## <a name="the-tech"></a><span data-ttu-id="cf6c1-109">技術</span><span class="sxs-lookup"><span data-stu-id="cf6c1-109">The tech</span></span>

<span data-ttu-id="cf6c1-110">HoloTour を使用して、ユーザーが自分の生きた部屋から直接、ペルーの[Machu の廃墟](https://en.wikipedia.org/wiki/Machu_Picchu)や、イタリアの現代の日[Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona)など、世界の最も優れた宛先のいくつかにアクセスできるようにしたいと考えました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-110">With HoloTour, we wanted to make it possible for people to visit some of the world’s most amazing destinations—like the [ruins of Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) in Peru or the modern day [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) in Italy—right from their own living rooms.</span></span> <span data-ttu-id="cf6c1-111">私たちのチームは、"本当に HoloTour" という目標を達成しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-111">Our team made it the goal of HoloTour to “make you feel like you’re really there.”</span></span> <span data-ttu-id="cf6c1-112">このエクスペリエンスは、単なる画像またはビデオである必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-112">The experience needed to be more than just pictures or videos.</span></span> <span data-ttu-id="cf6c1-113">HoloLens の固有の表示、追跡、およびオーディオテクノロジを利用することで、他の場所に仮想的に転送できると信じています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-113">By leveraging the unique display, tracking, and audio technology of HoloLens we believed we could virtually transport you to another place.</span></span> <span data-ttu-id="cf6c1-114">ここでは、アクセスしたすべての場所の視点、サウンド、3次元のジオメトリをキャプチャし、アプリ内で再作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-114">We would need to capture the sights, sounds, and three-dimensional geometry of every location we visited and then recreate that within our app.</span></span>

<span data-ttu-id="cf6c1-115">これを行うには、指向性オーディオキャプチャを使用して360°カメラのリモートテストを行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-115">In order to do this, we needed a 360° camera rig with directional audio capture.</span></span> <span data-ttu-id="cf6c1-116">これは非常に高い解像度でキャプチャする必要があるため、HoloLens で再生したときに撮影した映像が鮮明に見えるようにするためには、アイテムの合成を最小限にするためにカメラを近くに配置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-116">It needed to capture at extremely high resolution, so that the footage would look crisp when played back on a HoloLens and the cameras would need to be positioned close together in order to minimize stitching artifacts.</span></span> <span data-ttu-id="cf6c1-117">水平方向だけでなく、さらに上と下にも球の全範囲が必要でした。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-117">We wanted full spherical coverage, not just along the horizon, but above and below you as well.</span></span> <span data-ttu-id="cf6c1-118">また、マシン群は、世界中でも使用できるように移植可能である必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-118">The rig also needed to be portable so that we could take it all over the world.</span></span> <span data-ttu-id="cf6c1-119">利用可能な既製のオプションを評価し、解決、コスト、またはサイズのいずれかによって、ビジョンを実現するのに十分ではなかったことを実感しています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-119">We evaluated available off-the-shelf options and realized they simply weren’t good enough to realize our vision – either because of resolution, cost, or size.</span></span> <span data-ttu-id="cf6c1-120">ニーズを満たすカメラのテストマシンが見つからなかった場合は、自分で作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-120">If we couldn’t find a camera rig that satisfied our needs, we would have to build one ourselves.</span></span>

### <a name="building-the-rig"></a><span data-ttu-id="cf6c1-121">テストマシン群の構築</span><span class="sxs-lookup"><span data-stu-id="cf6c1-121">Building the rig</span></span>

<span data-ttu-id="cf6c1-122">最初のバージョンは、厚紙、Velcro、ダクトテープ、14 GoPro カメラから作成されたものであり、マクガイバーが誇りを持っていました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-122">The first version—made from cardboard, Velcro, duct tape, and 14 GoPro cameras—was something MacGyver would have been proud of.</span></span> <span data-ttu-id="cf6c1-123">GoPro カメラは、低価格で手頃な価格で、使いやすいメモリストレージを備えていたため、エンドツーエンドソリューションからカスタムのテスト対象マシンに至るまで、すべてを確認した結果、最終的に最適な選択肢となりました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-123">After reviewing everything from low-end solutions to custom manufactured rigs, GoPro cameras were ultimately the best option for us because they were small, affordable, and had easy-to-use memory storage.</span></span> <span data-ttu-id="cf6c1-124">小さなフォームファクターが特に重要なのは、カメラを近くに配置することが許可されているためです。カメラ間の距離が小さいほど、合成するアイテムのサイズが小さくなります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-124">The small form factor was especially important because it allowed us to place cameras fairly close together—the smaller the distance between cameras, the smaller the stitching artifacts will be.</span></span> <span data-ttu-id="cf6c1-125">独自のカメラの調整により、球体の完全*なカバレッジを*取得して、カメラをインテリジェントに調整し、合成プロセス中に一部のアーティファクトをスムーズにすることができました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-125">Our unique camera arrangement allowed us to get full sphere coverage *plus* enough overlap to intelligently align cameras and smooth out some artifacts during the stitching process.</span></span>

<span data-ttu-id="cf6c1-126">HoloLens で[空間サウンド](spatial-sound.md)機能を利用することは、convincingly の実際のイマーシブエクスペリエンスを作成するうえで重要です。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-126">Taking advantage of the [spatial sound](spatial-sound.md) capabilities on HoloLens is critical to creating a convincingly real immersive experience.</span></span> <span data-ttu-id="cf6c1-127">三脚のカメラの下にある4つのマイクの配列を使用しました。これにより、カメラの位置から4つの方向にサウンドがキャプチャされます。これにより、バックグラウンドで空間サウンドを作成するための十分な情報が得られます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-127">We used a four-microphone array situated beneath the cameras on the tripod, which would capture sound from the location of our camera in four directions, giving us enough information to create spatial sounds in our scenes.</span></span>

![360°カメラのリモートテストマシン群は Pantheon 以外の撮影に設定されています。](images/camera-pantheon-200px.png)

<span data-ttu-id="cf6c1-129">360°カメラのリモートテストマシン群は Pantheon 以外の撮影に設定されています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-129">Our 360° camera rig set up for filming outside the Pantheon.</span></span> 


<span data-ttu-id="cf6c1-130">私たちは、シアトル近くのたねじ山を使って、手作りのリモートテストマシンをテストし、ハイキングの上部にシーナリーをキャプチャしています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-130">We tested out our homemade rig by taking it up to Rattlesnake Ridge near Seattle, capturing the scenery at the top of the hike.</span></span> <span data-ttu-id="cf6c1-131">この結果は、今日の HoloTour に見た場所よりも大幅に洗練されていますが、これまでのように、テストマシンの設計が十分であるという自信を持っています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-131">The result, though significantly less polished than the locations you see in HoloTour today, gave us confidence that our rig design was good enough to make you feel like you’re really there.</span></span>

<span data-ttu-id="cf6c1-132">Velcro と厚紙から3D 印刷カメラハウジングにアップグレードし、GoPro カメラ用の外部バッテリパックを購入して、バッテリ管理を簡略化しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-132">We upgraded our rig from Velcro and cardboard to a 3D-printed camera housing and bought external battery packs for the GoPro cameras to simplify battery management.</span></span> <span data-ttu-id="cf6c1-133">さらに広範なテストを行いました。サンフランシスコに移動し、市の海岸とアイコンのゴールデンゲートブリッジの小さなツアーを作成しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-133">We then did a more extensive test, traveling down to San Francisco to create a miniature tour of the city’s coast and the iconic Golden Gate bridge.</span></span> <span data-ttu-id="cf6c1-134">このカメラのマシン群は、HoloTour でアクセスする場所のほとんどのキャプチャに使用されています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-134">This camera rig is what we used for most of our captures of the locations you visit in HoloTour.</span></span>

![Machu の撮影には、360°カメラのリモートテストマシン群があります。](images/camera-machu-pichu-500px.png)

<span data-ttu-id="cf6c1-136">Machu の撮影には、360°カメラのリモートテストマシン群があります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-136">The 360° camera rig filming in Machu Picchu.</span></span> 

## <a name="behind-the-scenes"></a><span data-ttu-id="cf6c1-137">しくみ</span><span class="sxs-lookup"><span data-stu-id="cf6c1-137">Behind the scenes</span></span>

<span data-ttu-id="cf6c1-138">撮影する前に、仮想ツアーに含める場所を確認する必要がありました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-138">Before filming, we needed to figure out which locations we wanted to include on our virtual tour.</span></span> <span data-ttu-id="cf6c1-139">ローマは最初に発送した場所であり、適切に取得したいので、scouting 旅行を事前に決定しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-139">Rome was the first location we intended to ship and we wanted to get it right, so we decided to do a scouting trip in advance.</span></span> <span data-ttu-id="cf6c1-140">私たちは、お客様が検討したサイトにアクセスするために、アーティスト、デザイナー、プロデューサーなどの6人のユーザーのチームを送信しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-140">We sent a team of six people—including artists, designers, and producers—for an in-person visit to the sites we were considering.</span></span> <span data-ttu-id="cf6c1-141">旅行のためには、撮影のために約9日 ~ 2.5 がかかりました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-141">The trip took about 9 days – 2.5 for travel, the rest for filming.</span></span> <span data-ttu-id="cf6c1-142">(Machu の撮影については、斥候旅行を行うことを選択していません。事前に調査し、のために数日間のバッファーを予約しています)。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-142">(For Machu Picchu we opted not to do a scout trip, researching in advance and booking a few days of buffer for filming.)</span></span>

<span data-ttu-id="cf6c1-143">ローマでは、チームは各領域の写真を撮影し、興味深い事実を示しています。また、crowds または制限のために各場所に移動するのが困難であり、フィルムにどのくらい難しいかなど、実用的な考慮事項もありました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-143">While in Rome, the team took photos of each area and noted interesting facts as well as practical considerations, such as how hard it is to travel to each spot and how difficult it would be to film because of crowds or restrictions.</span></span> <span data-ttu-id="cf6c1-144">これは休暇と同じように聞こえますが、大量の作業になります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-144">This may sound like a vacation, but it’s a lot of work.</span></span> <span data-ttu-id="cf6c1-145">何日も早く開始され、夜間までは停止しません。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-145">Days started early in the morning and would go non-stop until evening.</span></span> <span data-ttu-id="cf6c1-146">夜間には、チームがチームをレビューするためにフッテージがアップロードされました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-146">Each night, footage was uploaded for the team back in Seattle to review.</span></span> 

![ローマでのキャプチャクルー。](images/holotour-filming-crew-rome-500px.jpg) 

<span data-ttu-id="cf6c1-148">ローマでのキャプチャクルー。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-148">Our capture crew in Rome.</span></span> 


<span data-ttu-id="cf6c1-149">斥候旅行が完了した後、実際の撮影に対して最後のプランが作成されました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-149">After the scout trip was completed, a final plan was made for actual filming.</span></span> <span data-ttu-id="cf6c1-150">これには、フィルムに移動する場所、日、および時刻の詳細な一覧が必要でした。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-150">This required a detailed list of where we were going to film, on what day, and at what time.</span></span> <span data-ttu-id="cf6c1-151">海外の日々の費用がかかります。そのため、このような旅行は効率的である必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-151">Every day overseas is expensive, so these trips needed to be efficient.</span></span> <span data-ttu-id="cf6c1-152">ローマでガイドとハンドラを予約しました。このガイドとハンドラーは、日没の前から朝までのすべての日に完全に使用できます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-152">We booked guides and handlers in Rome to help us and fully used every day from before sunrise to after sunset.</span></span> <span data-ttu-id="cf6c1-153">実際に使用するのと同じように、最適なフッテージを取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-153">We need to get the best footage possible in order to make you feel like you’re really there.</span></span>

### <a name="capturing-the-video"></a><span data-ttu-id="cf6c1-154">ビデオをキャプチャする</span><span class="sxs-lookup"><span data-stu-id="cf6c1-154">Capturing the video</span></span>

<span data-ttu-id="cf6c1-155">キャプチャ中にいくつかの簡単な操作を行うと、後処理がより簡単になります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-155">Doing a few simple things during capture can make post-processing much easier.</span></span> <span data-ttu-id="cf6c1-156">たとえば、複数のカメラからイメージをまとめて合成する場合、各カメラのビューが若干異なるため、ビジュアルアイテムが表示されます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-156">For example, whenever you stitch together images from multiple cameras, you end up with visual artifacts because each camera has a slightly different view.</span></span> <span data-ttu-id="cf6c1-157">オブジェクトがカメラに近いほど、ビュー間の差が大きくなり、合成するアイテムが大きくなります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-157">The closer objects are to the camera, the larger the difference between the views, and the larger the stitching artifacts will be.</span></span> <span data-ttu-id="cf6c1-158">問題を視覚化する簡単な方法を次に示します。表面の前につまみを置き、目を1つだけ見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-158">Here's an easy way to visualize the problem: hold your thumb up in front of your face and look at it with only one eye.</span></span> <span data-ttu-id="cf6c1-159">次に、視点を切り替えます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-159">Now switch eyes.</span></span> <span data-ttu-id="cf6c1-160">背景に対して基準が移動するように見えます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-160">You’ll see that your thumb appears to move relative to the background.</span></span> <span data-ttu-id="cf6c1-161">表面から離れた場所につまみを置いて実験を繰り返すと、つまみが小さくなるように見えます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-161">If you hold your thumb further away from your face and repeat the experiment, your thumb will appear to move less.</span></span> <span data-ttu-id="cf6c1-162">このように見える動きは、カメラのように見ても、まったく同じイメージが表示されないので、少し離れたところに見えないということです。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-162">That apparent movement is similar to the stitching problem we faced: Your eyes, like our cameras, don’t see the exact same image because they are separated by a little distance.</span></span>

<span data-ttu-id="cf6c1-163">処理後の成果物を修正するよりも、最悪のアーティファクトを撮影するよりもはるかに簡単なので、彼らはカメラから遠く離れた場所にいることを望んでいるので、クローズアップオブジェクトを合成する必要がなくなりました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-163">Because it’s much easier to prevent the worst artifacts while filming than it is to correct them in post-processing, we tried to keep people and things far away from the camera in the hopes we could eliminate the need to stitch close-up objects.</span></span> <span data-ttu-id="cf6c1-164">カメラの周りの大きな消去を維持することは、多くの場合、撮影中に発生した最大の課題の1つであり、それを実現するためにクリエイティブな作業を行う必要がありました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-164">Maintaining a large clearing around our camera was probably one of the biggest challenges we had during shooting and we had to get creative to make it work.</span></span> <span data-ttu-id="cf6c1-165">ローカルガイドを使用することは、crowds の管理において大きな助けとなりました。ただし、特に、各場所で少しずつフッテージを取得する必要があるため、撮影空間が適度に有効であることをマークするために、記号 (小さいコーンや bean バッグ) を使用することもありました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-165">Working with local guides was a huge help in managing crowds, but we also found that using signs—and sometimes small cones or bean bags—to mark our filming space was reasonably effective, especially since we only needed to get a short amount of footage at each location.</span></span> <span data-ttu-id="cf6c1-166">多くの場合、適切なキャプチャを実現する最善の方法は、ほとんどの従業員が登場する前に、朝の早い段階で到着することでした。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-166">Often the best way to get a good capture was to just to arrive very early in the morning, before most people showed up.</span></span>

<span data-ttu-id="cf6c1-167">他の便利なキャプチャ手法の中には、従来のフィルムプラクティスから直接アクセスできるものがあります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-167">Some other useful capture techniques come straight from traditional film practices.</span></span> <span data-ttu-id="cf6c1-168">たとえば、後で必要になる可能性があるテクスチャとオブジェクトのすべてのカメラとキャプチャされた参照写真に色補正カードを使用しています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-168">For example, we used a color correction card on all of our cameras and captured reference photos of textures and objects we might need later.</span></span> 

![カラー修正カードを示す Machu のラフカットの荒削り。](images/rough-cut-machu-picchu-500px.png)

<span data-ttu-id="cf6c1-170">結合前の Pantheon フッテージのラフカット。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-170">A rough cut of Pantheon footage before stitching.</span></span>

### <a name="processing-the-video"></a><span data-ttu-id="cf6c1-171">ビデオの処理</span><span class="sxs-lookup"><span data-stu-id="cf6c1-171">Processing the video</span></span>

<span data-ttu-id="cf6c1-172">360°のコンテンツのキャプチャは最初の手順にすぎません。 HoloTour に表示される最終的なアセットにキャプチャした未加工のカメラのフッテージを変換するために、大量の処理が必要になります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-172">Capturing 360° content is only the first step—a lot of processing is needed to convert the raw camera footage we captured into the final assets you see in HoloTour.</span></span> <span data-ttu-id="cf6c1-173">自宅に戻った後は、14の異なるカメラフィードからビデオを撮影し、最小成果物を持つ1つの連続ビデオに変換する必要がありました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-173">Once we were back home we needed to take the video from 14 different camera feeds and turn it into a single continuous video with minimal artifacts.</span></span> <span data-ttu-id="cf6c1-174">私たちの芸術チームは、キャプチャした映像を組み合わせるために多くのツールを使用し、可能な限り処理を最適化するためのパイプラインを作成しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-174">Our art team used a number of tools to combine and polish the captured footage and we developed a pipeline to optimize the processing as much as possible.</span></span> <span data-ttu-id="cf6c1-175">映像をまとめて合成、色を修正し、合成して、不要な要素や成果物を削除したり、寿命と動きの補助ポケットを追加したりする必要がありました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-175">The footage had to be stitched together, color corrected, and then composited to remove distracting elements and artifacts or to add supplemental pockets of life and motion, all with the goal to enhance that feeling of actually being there.</span></span>

![結合前の Pantheon フッテージのラフカット。](images/rough-cut-pantheon-500px.png)

<span data-ttu-id="cf6c1-177">結合前の Pantheon フッテージのラフカット。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-177">A rough cut of Pantheon footage before stitching.</span></span> 


<span data-ttu-id="cf6c1-178">ビデオをまとめるために、 [Ptgui](https://www.ptgui.com/)というツールを使用して、処理パイプラインに統合しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-178">To stitch the videos together, we used a tool called [PTGui](https://www.ptgui.com/) and integrated it into our processing pipeline.</span></span> <span data-ttu-id="cf6c1-179">後処理の一環として、引き続きビデオからフレームを抽出し、それらのフレームに適した合成パターンを見つけました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-179">As part of post-processing we extracted still frames from our videos and found a stitching pattern that looked good for one of those frames.</span></span> <span data-ttu-id="cf6c1-180">次に、このパターンをカスタムプラグインに適用しました。これにより、ビデオアーティストは、After 効果で合成しながら、合成パターンを適切に調整し、調整することができました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-180">We then applied that pattern to a custom plugin we wrote that allowed our video artists to fine tune and tweak the stitching pattern directly while compositing in After Effects.</span></span> 

![合成 Pantheon フッテージを示す PTGui のスクリーンショット。](images/stitching-tool-pantheon-500px.png)

<span data-ttu-id="cf6c1-182">合成 Pantheon フッテージを示す PTGui のスクリーンショット。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-182">Screenshot of PTGui showing the stitched Pantheon footage.</span></span> 


### <a name="video-playback"></a><span data-ttu-id="cf6c1-183">ビデオ再生</span><span class="sxs-lookup"><span data-stu-id="cf6c1-183">Video playback</span></span>

<span data-ttu-id="cf6c1-184">映像の処理が完了すると、シームレスなビデオが作成されますが、非常に大きいのは8K の解像度です。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-184">After processing of the footage is completed, we have a seamless video but it’s extraordinarily large—around 8K resolution.</span></span> <span data-ttu-id="cf6c1-185">ビデオのデコードはコストがかかり、8K ビデオを処理できるコンピューターはほとんどありません。そのため、次の課題は、このビデオを HoloLens で再生する方法を見つけることができました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-185">Decoding video is expensive and there are very few computers that can handle an 8K video so the next challenge was finding a way to play this video back on HoloLens.</span></span> <span data-ttu-id="cf6c1-186">私たちは、ユーザーがビデオ全体を見ているように感じながら、デコードコストを回避するためのさまざまな戦略を策定しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-186">We developed a number of strategies to avoid the cost of decoding while still making the user feel like they were viewing the entire video.</span></span>

<span data-ttu-id="cf6c1-187">最も簡単な最適化は、あまり変更されないビデオの一部をデコードしないようにすることです。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-187">The easiest optimization is to avoid decoding parts of the video that don’t change much.</span></span> <span data-ttu-id="cf6c1-188">私たちは、ほとんど、またはまったく動作しない各シーンの領域を識別するツールを作成しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-188">We wrote a tool to identify areas in each scene that have little or no motion.</span></span> <span data-ttu-id="cf6c1-189">これらの領域については、各フレームにビデオをデコードするのではなく、静的な画像を示しています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-189">For those regions we show a static image rather than decoding a video each frame.</span></span> <span data-ttu-id="cf6c1-190">これを可能にするために、大規模なビデオをかなり小さなチャンクに分割しています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-190">To make this possible, we divided up the massive video into much smaller chunks.</span></span>

<span data-ttu-id="cf6c1-191">また、デコードしたすべてのピクセルが最も効果的に使用されていることも確認しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-191">We also made sure that every pixel we decoded was used most effectively.</span></span> <span data-ttu-id="cf6c1-192">ビデオのサイズを小さくするための圧縮技法を実験しています。投影されるジオメトリのポリゴンに応じて、ビデオ領域を分割します。どの程度の詳細な多角形が含まれているかに基づいて、UVs を調整し、ビデオを再パックしています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-192">We experimented with compression techniques to lower the size of the video; we split the video regions according to the polygons of the geometry it would be projected onto; we adjusted UVs and repacked the videos based on how much detail different polygons included.</span></span> <span data-ttu-id="cf6c1-193">この作業の結果として、1つの8k ビデオが、シーンに適切に再プロジェクションされるまで、ほぼ判読できないような多くのチャンクに変換されています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-193">The result of this work is that what started as a single 8k video turned into many chunks that look almost unintelligible until they are properly re-projected into the scene.</span></span> <span data-ttu-id="cf6c1-194">テクスチャマッピングと UV パッキングを理解しているゲーム開発者にとっては、これはよく知られているでしょう。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-194">For a game developer who understands texture mapping and UV packing, this will probably look familiar.</span></span> 

![最適化前の Pantheon の完全なビュー。](images/pantheon-before-optimization-500px.png) 

<span data-ttu-id="cf6c1-196">最適化前の Pantheon の完全なビュー。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-196">A full view of the Pantheon before optimizations.</span></span> 


![Pantheon の右半分。ビデオ再生用に処理されます。](images/pantheon-process-video-playback-500px.png) 

<span data-ttu-id="cf6c1-198">Pantheon の右半分。ビデオ再生用に処理されます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-198">The right half of the Pantheon, processed for video playback.</span></span> 


![最適化とパッキングの後の1つのビデオ領域の例。](images/single-video-region-after-optimization-500px.png) 

<span data-ttu-id="cf6c1-200">最適化とパッキングの後の1つのビデオ領域の例。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-200">Example of a single video region after optimization and packing.</span></span> 


<span data-ttu-id="cf6c1-201">実際に表示されていないビデオのデコードを避けるために、もう1つのトリックを使用しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-201">Another trick we used was to avoid decoding video you aren’t actively viewing.</span></span> <span data-ttu-id="cf6c1-202">HoloTour では、特定の時点では全シーンの一部しか表示できません。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-202">While in HoloTour, you can only see part of the full scene at any given moment.</span></span> <span data-ttu-id="cf6c1-203">ビューのフィールド (視界) の内側または外側にあるビデオのみをデコードします。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-203">We only decode videos within or shortly outside of your field of view (FOV).</span></span> <span data-ttu-id="cf6c1-204">ヘッドを回転させると、現在見ているビデオの領域の再生が開始され、そこに含まれていない再生が停止します。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-204">As you rotate your head, we start playing the regions of the video that are now in your FOV and stop playing ones that are no longer within it.</span></span> <span data-ttu-id="cf6c1-205">ほとんどのユーザーはこれが起こっていることに気付かれませんが、すぐに撮影すると、ビデオの開始に1秒ほどかかります。静止画像が表示され、準備ができたらビデオに戻ります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-205">Most people won’t even notice this is happening, but if you turn around rapidly, you’ll see the video takes a second to start— in the meantime you’ll see a static image which then fades back to video once it’s ready.</span></span>

<span data-ttu-id="cf6c1-206">この戦略を実現するために、広範なビデオ再生システムを開発しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-206">To make this strategy work we developed an extensive video playback system.</span></span> <span data-ttu-id="cf6c1-207">低レベルの再生コードを最適化して、ビデオの切り替えを非常に効率的にしています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-207">We optimized the low level playback code in order to make video switching extremely efficient.</span></span> <span data-ttu-id="cf6c1-208">また、動画をいつでもすばやく切り替えることができるように、ビデオを特殊な方法でエンコードする必要がありました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-208">Additionally, we had to encode our videos in a special way to make it possible to rapidly switch to any video at any time.</span></span> <span data-ttu-id="cf6c1-209">この再生パイプラインにはかなりの時間がかかり、段階的に実装しました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-209">This playback pipeline took a significant amount of development time so we implemented it in stages.</span></span> <span data-ttu-id="cf6c1-210">私たちは、効率的ではなく、シンプルなシステムを開始しましたが、デザイナーやアーティストは経験を持っています。また、最終的な品質基準バーに出荷することを許可された、より堅牢な再生システムに徐々に改善されています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-210">We started with a simpler system that was less efficient, but allowed designers and artists to work on the experience, and slowly improved it to a more robust playback system that allowed us to ship at the final quality bar.</span></span> <span data-ttu-id="cf6c1-211">この最終的なシステムには、Unity 内に作成したカスタムツールがあり、シーン内でビデオを設定し、再生エンジンを監視していました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-211">This final system had custom tools we created within Unity to set up the video within the scene and monitor the playback engine.</span></span>

### <a name="recreating-near-space-objects-in-3d"></a><span data-ttu-id="cf6c1-212">3D でのほぼスペースオブジェクトの再作成</span><span class="sxs-lookup"><span data-stu-id="cf6c1-212">Recreating near-space objects in 3D</span></span>

<span data-ttu-id="cf6c1-213">ビデオでは、HoloTour に表示されるほとんどのものを構成していますが、Piazza Navona での塗装、Pantheon の外側のふんすい、航空写真の背景に使用しているホットエアバルーンなど、いくつかの3D オブジェクトが近くに表示されます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-213">Videos make up the majority of what you see in HoloTour, but there are a number of 3D objects that appear close to you, such as the painting in Piazza Navona, the fountain outside the Pantheon, or the hot air balloon you stand in for aerial scenes.</span></span> <span data-ttu-id="cf6c1-214">これらの3D オブジェクトは、人間の深さの知覚が非常に優れているため、非常に便利ではないため、重要です。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-214">These 3D objects are important because human depth perception is very good up close, but not very good far away.</span></span> <span data-ttu-id="cf6c1-215">距離に関するビデオを見ることができますが、ユーザーが自分のスペースをよく見てみたいと思います。近くのオブジェクトには深さが必要です。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-215">We can get away with video in the distance, but to allow users to walk around their space and feel like they’re really there, nearby objects need depth.</span></span> <span data-ttu-id="cf6c1-216">この手法は、自然歴史博物館で見られるようなものに似ています。つまり、前景に物理的な造園、植物、および動物 specimens を持つ diorama を描きますが、バックグラウンドでの巧妙マスクされたマットの描画に recedes ます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-216">This technique is similar to the sort of thing you might see in a natural history museum—picture a diorama that has physical landscaping, plants, and animal specimens in the foreground, but recedes into a cleverly masked matte painting in the background.</span></span>

<span data-ttu-id="cf6c1-217">オブジェクトによっては、単純に作成されてシーンに追加された3D アセットで、エクスペリエンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-217">Some objects are simply 3D assets we created and added to the scene to enhance the experience.</span></span> <span data-ttu-id="cf6c1-218">描画とホットエアバルーンは、客席したときに存在していなかったため、このカテゴリに分類されます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-218">The painting and the hot air balloon fall into this category because they weren’t present when we filmed.</span></span> <span data-ttu-id="cf6c1-219">ゲームアセットと同様に、チームの3D アーティストによって作成され、適切にテクスチャが作成されました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-219">Similar to game assets, they were created by a 3D artist on our team and textured appropriately.</span></span> <span data-ttu-id="cf6c1-220">これらは、お客様の場所に近い場所に配置され、ゲームエンジンはそれらを2つの HoloLens ディスプレイにレンダリングして、3D オブジェクトとして表示できるようにします。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-220">We place these in our scenes near where you stand, and the game engine can render them to the two HoloLens displays so that they appear as a 3D object.</span></span>

<span data-ttu-id="cf6c1-221">Pantheon 以外の他の資産は、ビデオを撮影している場所に存在する実際のオブジェクトですが、これらのオブジェクトをビデオから読み込んで3D にするためには、いくつかの作業を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-221">Other assets, like the fountain outside the Pantheon, are real objects that exist in the locations where we're shooting video, but to bring these objects out of the video and into 3D, we have to do a number of things.</span></span>

<span data-ttu-id="cf6c1-222">まず、各オブジェクトに関する追加情報が必要です。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-222">First, we need additional information about each object.</span></span> <span data-ttu-id="cf6c1-223">撮影の場所では、これらのオブジェクトの参照フッテージが多数キャプチャされているため、テクスチャを正確に再作成するための十分な詳細なイメージが得られます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-223">While on location for filming, our team captured a lot of reference footage of these objects so that we would have enough detailed images to accurately recreate the textures.</span></span> <span data-ttu-id="cf6c1-224">また、チームは[photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) scan を実行しました。これにより、多数の2d イメージから3d モデルが構築され、完全なスケールでオブジェクトの粗いモデルが提供されます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-224">The team also performed a [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) scan, which constructs a 3D model from dozens of 2D images, giving us a rough model of the object at perfect scale.</span></span>

<span data-ttu-id="cf6c1-225">フッテージを処理すると、後で3D 表現に置き換えられるオブジェクトがビデオから削除されます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-225">As we process our footage, objects that will later be replaced with a 3D representation are removed from the video.</span></span> <span data-ttu-id="cf6c1-226">3D アセットは photogrammetry モデルに基づいていますが、アーティストによってクリーンアップおよび簡素化されています。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-226">The 3D asset is based on the photogrammetry model but cleaned up and simplified by our artists.</span></span> <span data-ttu-id="cf6c1-227">一部のオブジェクトについては、ふんすいの水のテクスチャなど、ビデオの一部を使用できますが、ほとんどのふんすいは3D オブジェクトになっています。これにより、ユーザーは深度を認識して、エクスペリエンスの限られた領域でその周囲を調べることができます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-227">For some objects, we can use parts of the video—such as the water texture on the fountain—but most of the fountain is now a 3D object, which allows users to perceive depth and walk around it in a limited space in the experience.</span></span> <span data-ttu-id="cf6c1-228">このようなほぼスペースのオブジェクトを使用すると、リアリティの意味が大きくなり、仮想の場所でユーザーを接地させることができます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-228">Having near-space objects like this greatly adds to the sense of realism and helps to ground the users in the virtual location.</span></span> 

![ふんすいが削除された pantheon フッテージ。](images/object-removal-pantheon-500px.png)

<span data-ttu-id="cf6c1-231">ふんすいが削除された pantheon フッテージ。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-231">Pantheon footage with the fountain removed.</span></span> <span data-ttu-id="cf6c1-232">3D アセットに置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-232">It will be replaced with a 3D asset.</span></span>


## <a name="final-thoughts"></a><span data-ttu-id="cf6c1-233">最終的な考え</span><span class="sxs-lookup"><span data-stu-id="cf6c1-233">Final thoughts</span></span>

<span data-ttu-id="cf6c1-234">ここで説明した内容よりも、このコンテンツを作成することは当然です。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-234">Obviously, there was more to creating this content than what we've discussed here.</span></span> <span data-ttu-id="cf6c1-235">いくつかのシーンがあります。これを "不可能なパースペクティブ" と呼びます。これには、Colosseum でのホットエアバルーンの乗り物や gladiator の戦いなどが含まれます。これにより、独創的なアプローチが採用されました。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-235">There are a few scenes—we like to call them "impossible perspectives"—including the hot air balloon ride and the gladiator fight in the Colosseum, which took a more creative approach.</span></span> <span data-ttu-id="cf6c1-236">これらの問題については、今後のケーススタディで説明します。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-236">We'll address these in a future case study.</span></span>

<span data-ttu-id="cf6c1-237">実稼働中に発生したより大きな課題にソリューションを共有することは、他の開発者にとって役に立ちます。また、これらの手法のいくつかを使用して、HoloLens 向けに独自のイマーシブエクスペリエンスを作成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-237">We hope that sharing solutions to some of the bigger challenges we had during production is helpful to other developers and that you're inspired to use some of these techniques to create your own immersive experiences for HoloLens.</span></span> <span data-ttu-id="cf6c1-238">(その場合は、 [HoloLens アプリ開発フォーラム](https://forums.hololens.com/)でお客様と共有するようにしてください)。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-238">(And if you do, please make sure to share it with us on the [HoloLens App Development forum](https://forums.hololens.com/)!)</span></span>

## <a name="about-the-authors"></a><span data-ttu-id="cf6c1-239">作成者について</span><span class="sxs-lookup"><span data-stu-id="cf6c1-239">About the authors</span></span>

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="cf6c1-240"><b>David Haley</b>は、HoloTour での作業によって可能であると考えられるカメラのマシンとビデオの再生について詳しく学習したシニア開発者です。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-240"><b>David Haley</b> is a Senior Developer who learned more about camera rigs and video playback than he thought possible from working on HoloTour.</span></span></td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="cf6c1-241"><b>Danny Askew</b>は、ローマの旅をできるだけ完璧にしたビデオアーティストです。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-241"><b>Danny Askew</b> is a Video Artist who made sure your journey through Rome was as flawless as possible.</span></span></td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="cf6c1-242"><b>Jason Syltebo</b>は、時間が戻った場合でも、アクセスするすべての宛先の soundscape を体験できるようにするオーディオデザイナーです。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-242"><b>Jason Syltebo</b> is an Audio Designer who made sure you could experience the soundscape of every destination you visit, even when you go back in time.</span></span></td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="cf6c1-243"><b>Travis Steiner</b>は、scouted の場所を研究し、旅行計画を作成し、サイトの有向撮影を作成する設計責任者です。</span><span class="sxs-lookup"><span data-stu-id="cf6c1-243"><b>Travis Steiner</b> is a Design Director who researched and scouted locations, created trip plans, and directed filming on site.</span></span></td>
</tr>
</table>



## <a name="see-also"></a><span data-ttu-id="cf6c1-244">参照</span><span class="sxs-lookup"><span data-stu-id="cf6c1-244">See also</span></span>
* [<span data-ttu-id="cf6c1-245">ビデオ: Microsoft HoloLens: HoloTour</span><span class="sxs-lookup"><span data-stu-id="cf6c1-245">Video: Microsoft HoloLens: HoloTour</span></span>](https://www.youtube.com/watch?v=pLd9WPlaMpY)
