---
title: HoloLens エミュレーターを使用する
description: HoloLens エミュレーターを使用して、物理的な HoloLens を使用せずに、PC 上で Mixed Reality アプリをテストします。
author: hamalawi
ms.author: moelhama
ms.date: 7/13/2020
ms.topic: article
ms.localizationpriority: high
keywords: HoloLens, エミュレーター
ms.openlocfilehash: 597a0a9103f8313d26449b996c1e7af6f5619b2c
ms.sourcegitcommit: 2f5f95a9ca1b02d94eb9163f0f4ff6b1e4126de2
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/29/2020
ms.locfileid: "87376664"
---
# <a name="using-the-hololens-emulator"></a>HoloLens エミュレーターを使用する

HoloLens のエミュレーターを使用すると、物理的な HoloLens を使用せずに、PC でホログラフィック アプリケーションをテストできます。 これには、HoloLens 開発ツールセットも含まれています。 このエミュレーターには、Hyper-V 仮想マシンを使用します。 HoloLens のセンサーによって通常読み取られる人間と環境の入力は、キーボード、マウス、または Xbox コントローラーからシミュレートされます。 アプリケーションは、変更しなくてもエミュレーターで実行でき、実際の HoloLens で実行されていないことも認識しません。

デスクトップ PC 用の Windows Mixed Reality イマーシブ (VR) ヘッドセット アプリケーションまたはゲームを開発したい場合は、[Windows Mixed Reality シミュレーター](using-the-windows-mixed-reality-simulator.md)についてのページをご覧ください。デスクトップ ヘッドセットをシミュレートできます。

## <a name="hololens-2-emulator-overview"></a>HoloLens 2 エミュレーターの概要

>[!VIDEO https://channel9.msdn.com/Shows/Docs-Mixed-Reality/HoloLens-2-Emulator-Overview/player?format=ny]

## <a name="installing-the-hololens-emulator"></a>HoloLens エミュレーターをインストールする
HoloLens のエミュレーターをダウンロードします。

バージョン: 
* [HoloLens 2 エミュレーター (Windows Holographic バージョン 2004、2020 年 7 月の更新プログラム)](https://go.microsoft.com/fwlink/?linkid=2135188)。
* [HoloLens エミュレーター (第 1 世代) およびホログラフィック プロジェクト テンプレート](https://go.microsoft.com/fwlink/?linkid=2065980)。

HoloLens エミュレーターのリリース ノートと以前のビルドは、「[HoloLens エミュレーターのアーカイブ](hololens-emulator-archive.md)」ページにあります。

### <a name="hololens-emulator-system-requirements"></a>HoloLens エミュレーターのシステム要件

HoloLens エミュレーターでは、ハードウェア アクセラレータによるグラフィックスのため、RemoteFx 対応の Hyper-V (第 1 世代エミュレーター) または GPU PV (HoloLens 2 エミュレーター) を使用します。 エミュレーターを使用するには、PC が次のハードウェア要件を満たしていることを確認します。
* 64 ビットの Windows 10 Pro、Enterprise、または Education 
    >[!NOTE]
    >Windows 10 Home エディションは、Hyper-V または HoloLens のエミュレーターをサポートしていません。  
    >HoloLens 2 エミュレーターには、Windows 10 October 2018 Update 以降が必要です。
* 64 ビット CPU
* 4 コアの CPU (または合計 4 コアとなる複数の CPU)
* 8 GB 以上の RAM
* BIOS で以下の機能が[サポートされ、有効になっている](https://blogs.technet.com/b/iftekhar/archive/2010/08/09/enable-hardware-settings-in-bios-to-run-hyper-v.aspx)必要があります。
   * ハードウェア補助による仮想化
   * Second Level Address Translation (SLAT)
   * ハードウェアベースのデータ実行防止 (DEP)
* GPU の要件
   * DirectX 11.0 以降
   * WDDM 1.2 グラフィックス ドライバー以降 (第 1 世代)
   * WDDM 2.5 グラフィックス ドライバー (HoloLens 2 エミュレーター)
   * このエミュレーターは、サポートされていない GPU で動作する可能性がありますが、大幅に遅くなります。

システムが上記の要件を満たしている場合、エミュレーターのインストールが成功するように、[コントロール パネル] > [プログラム] > [プログラムと機能] > [Windows の機能の有効化または無効化] で [Hyper-V] が選択されていることを確認し、**システムで「Hyper-V」機能が有効になっていることを確認してください**。

## <a name="deploying-apps-to-the-hololens-emulator"></a>HoloLens エミュレーターにアプリを展開する

1. Visual Studio にアプリケーション ソリューションを読み込みます。
    >[!NOTE]
    >Unity を使用する場合は、Unity からプロジェクトをビルドし、ビルドされたソリューションを通常どおりに Visual Studio に読み込みます。
2. HoloLens エミュレーター (第 1 世代) では、プラットフォームが **x86** に設定されていることを確認します。 HoloLens 2 エミュレーターでは、プラットフォームが **x86** または **x64** に設定されていることを確認します。
3. デバッグのターゲット デバイスとして、目的の **HoloLens エミュレーター**のバージョンを選択します。
4. **[デバッグ] > [デバッグの開始]** に移動するか **F5** キーを押してエミュレーターを起動し、アプリケーションをデバッグ用にデプロイします。

最初にエミュレーターを起動する場合は、1 分以上かかる場合があります。 エミュレーターにすばやくアプリケーションをデプロイできるように、デバッグ セッションの間はエミュレーターを開いたままにしておくことをお勧めします。

## <a name="basic-emulator-input"></a>基本的なエミュレーターの入力

このエミュレーターの制御は、多くの一般的な 3D ビデオ ゲームによく似ています。 入力オプションは、キーボード、マウス、または Xbox コントローラーで使用できます。 エミュレーターを制御するには、HoloLens を付けることで疑似ユーザーの動作を指示します。 動作により、疑似ユーザーが環境周辺を移動します。 エミュレーターで実行されるアプリケーションは、実際のデバイスで応答するのと同様に応答します。

HoloLens (第 1 世代) のカーソルは、頭の移動と回転に追従します。 HoloLens 2 エミュレーターでは、カーソルは手の動きと向きに追従します。

* **前後左右に歩く** - キーボードの W、A、S、D キーまたは Xbox コントローラーの左スティックを使用します。
* **上下左右を見る** - マウスをクリックしてドラッグするか、キーボードの方向キーを使用するか、Xbox コントローラーの右スティックを使用します。
* **エア タップ ジェスチャ** - マウスを右クリックするか、キーボードの Enter キーを押すか、Xbox コントローラーの A ボタンを使用します。
* **ブルーム/システム ジェスチャ** - キーボードの Windows キーまたは F2 キーを押すか、Xbox コントローラーの B ボタンを押します。
* **手を動かしてスクロールする** - Alt キーを押したままにし、マウスの右ボタンを押しながらマウスを上下にドラッグします。または、Xbox コントローラーで右トリガーと A ボタンを押しながら、右スティックを上下に移動します。
* **手を動かして向きを変える** (HoloLens 2 エミュレーターのみ) - Alt キーを押しながらマウスを上下左右にドラッグして手を動かします。または、方向キーと Q または E を使用して手を回転させたり傾けたりします。 Xbox コントローラーでは、L または R ボタンを押しながら左サムスティックを使用して手を前後左右に動かし、右サムスティックを使用して手を回転させ、Dpad の上下で手を上げ下げします。

Windows Mixed Reality イマーシブ ヘッドセットをお持ちですか?  HoloLens 2 エミュレーター (Windows Holographic、バージョン 2004) 以降では、Windows Mixed Reality イマーシブ ヘッドセットとモーション コントローラーを使用して、HoloLens 2 エミュレーターを制御し、ステレオで表示することができます。  「[HoloLens 2 エミュレーターで Windows Mixed Reality イマーシブ ヘッドセットとモーション コントローラーを使用する](#using-a-windows-mixed-reality-immersive-headset-and-motion-controllers-with-the-hololens-2-emulator)」を参照してください

## <a name="anatomy-of-the-hololens-2-emulator"></a>HoloLens 2 エミュレーターの構造 

### <a name="main-window"></a>メイン ウィンドウ

![HoloLens 2 エミュレーターのメイン ウィンドウ](images/emulator2-900px.png)

### <a name="toolbar"></a>ツール バー

メイン ウィンドウの右側には、エミュレーター ツールバーが表示されます。 ツールバーには、次のボタンが含まれています。
* ![閉じるアイコン](images/emulator-close.png) **閉じる**:エミュレーターを閉じます。
* ![最小化アイコン](images/emulator-minimize.png) **最小化**:エミュレーターのウィンドウを最小化します。
* ![シミュレーション アイコン](images/emulator-simulation-panel.png) **シミュレーション コントロール パネル**:[エミュレーターへの入力](#basic-emulator-input)の構成と制御を行う[シミュレーション コントロール パネル](#simulation-control-panel)を表示または非表示にします。
* ![画面のサイズに合わせるアイコン](images/emulator-fit.png) **画面のサイズに合わせる**:エミュレーターが画面に収まるようにします。
* ![ズーム アイコン](images/emulator-zoom.png) **ズーム**:エミュレーターを大きくしたり小さくしたりします。
* ![ヘルプ アイコン](images/emulator-help.png) **ヘルプ**:エミュレーターのヘルプを開きます。
* ![デバイス ポータルを開くアイコン](images/emulator-deviceportal.png) **デバイス ポータルを開く**:エミュレーターで HoloLens OS の Windows デバイス ポータルを開きます。
* ![ツール アイコン](images/emulator-tools.png) **ツール**: **[その他のツール]** ウィンドウを開きます。

### <a name="simulation-control-panel"></a>シミュレーション コントロール パネル

シミュレーション コントロール パネルを使用すると、疑似ユーザーの現在の位置や向き、入力デバイスを表示できます。 両方の手の表示または非表示、疑似入力の制御に使う PC のキーボードやマウス、ゲームパッドといったデバイスなど、両方の疑似入力を構成することもできます。

![シミュレーション コントロール パネル](images/emulator-simulation-control-panel.png)

* シミュレーション パネルを非表示または表示するには、ツールバーのボタンをクリックするか、キーボードの F7 キーを押します。
* コントロールまたはフィールドの上にマウスを移動すると、ツールヒントが表示されます。これには、キーボード、マウス、ゲームパッド コントロールが含まれています。
* 手を表示または非表示するには、左手または右手の下にあるスイッチを切り替えます。
* 手を制御するには、キーボードで左または右の Alt キーを使用するか、ゲームパッドの L または R ボタンを使用します。
* すべての入力を片手または両手を伝えるには、トグル スイッチの下のプッシュピン ボタンをクリックします。 これは、手に対応する Alt キーを押したままにするのと同じです。
* 視線の方向を制御するには、[目] セクションのプッシュピンをクリックします。 これは、キーボードの Y キーを押したままにするのと同じです。
* 部屋の記録を読み込むには、[記録] セクションの [読み込み] ボタンをクリックします。 詳細については、「[疑似ルーム](#simulated-rooms)」を参照してください。
* キーボード、マウスまたはゲームパッドの入力に応答して疑似ユーザーや入力デバイスが移動または回転するスピードを調整するには、[入力設定] の横にある歯車アイコンをクリックしてスライダーを調整します。
* 既定では、キーボード入力は疑似ユーザーと疑似入力を制御します。 PC のキーボード入力を HoloLens に送るには、[シミュレーションにキーボードを使用] をオフにします。 F4 キーは、この設定のショートカット キーです。
* シミュレーション パネルが既に表示されている場合、F8 キーを押すと、キーボードのフォーカスがそれに移動します。
* エミュレーター ウィンドウとシミュレーション パネルのドッキングを解除するには、パネルの下部にあるボタンをクリックするか、キーボードの F9 キーを押します。  ウィンドウを閉じるか、もう一度 F9 キーを押すと、ウィンドウがエミュレーターに戻ります。
* %ProgramFiles(x86)%\Windows Kits\10\Microsoft XDE\10.0.18362.0\ で PerceptionSimulationInput.exe を実行すると、シミュレーション コントロール パネルを個別のアプリケーションとして起動し、HoloLens 2 エミュレーター、HoloLens 2 デバイス、または Windows Mixed Reality シミュレーションに接続して操作することができます。

### <a name="account-tab"></a>[アカウント] タブ

[アカウント] タブでは、Microsoft アカウントでサインインするようにエミュレーターを構成できます。 これは、ユーザーによるアカウントへのサインインが要求される API をテストする際に便利です。 このオプションを切り替えた場合、HoloLens のエミュレーターを完全に終了して再起動しないと設定が反映されません。 このオプションが有効になっている場合、次回以降にエミュレーターを起動すると、初めて HoloLens を開始する場合と同様にサインインが求められます。 PC のキーボードを使用して資格情報を入力するには、最初にシミュレーション コントロール パネルで [シミュレーションにキーボードを使用] をオフにするか、キーボードの F4 キーを押してキーボード設定のオンとオフを切り替えます。

### <a name="optional-settings-tab"></a>[オプション設定] タブ

[オプション設定] タブには、ハードウェア アクセラレータに対応したグラフィックスを有効または無効にするためのコントロールが表示されます。 ハードウェア アクセラレータに対応したグラフィックスは、PC のグラフィックス アダプターのドライバーでサポートされている場合、既定で使用されます。 グラフィックス アダプターのドライバーが GPU-PV をサポートしていない場合は、このオプションは表示されません。

### <a name="diagnostics-tab"></a>[診断] タブ

[診断] タブには、仮想 GPU の状態と共に、エミュレーターの IP アドレスが Windows デバイス ポータルへのリンクの形式で表示されます。

### <a name="network-tab"></a>[ネットワーク] タブ

[ネットワーク] タブには、エミュレーターのネットワーク アダプターの詳細と、ホスト コンピューターのネットワーク アダプターの詳細が表示されます。 HoloLens 2 エミュレーターでは、このタブは、Windows 10 May 2019 Update 以降でエミュレーターを実行している場合にのみ表示されます。

### <a name="nat-configuration-tab"></a>[NAT 構成] タブ

このタブは、Windows 10 May 2019 Update 以降でエミュレーターを実行している場合にのみ表示されます。

このエミュレーターは、ユーザーの PC のネットワーク接続を使用し、NAT の背後に置かれます。  このタブを使用すると、ホスト PC からエミュレーターにポートをマップできます。これにより、そのエミュレーターで実行されているアプリケーションやサービスにリモート デバイスが接続できるようになります。

たとえば、リモート PC からエミュレーターのデバイス ポータルにアクセスするには、次のようにします。

1. テーブルの空き行をダブルクリックして、内部ポート 80 (デバイス ポータルがリッスンしているポート) のエントリを追加します。  他のアプリケーションの場合は、そのアプリケーションがリッスンしているポート番号を入力します。
2. 使用可能な任意の外部ポートを選択します。  この例では、ポート 8080 を外部ポートとして使用します。
3. プロトコルを選択します。  既定値は TCP です。  デバイス ポータルは TCP を使用するので、既定のままにしておきます。
4. [変更の適用] をクリックして、マッピングを有効にします。  状態が [保留中] から [アクティブ] に変更されます。
5. リモート PC でブラウザーを開き、(IP-of-the-PC-running-the-emulator):8080 に移動します。  デバイス ポータルのインターフェイスが表示されます。  リモート PC で使用する IP アドレスは、エミュレーター自体ではなく、エミュレーターを実行する PC の IP アドレスでなければならないことにご注意ください。  IP はさまざまな方法で取得できます。たとえば、[ネットワークとインターネット] カテゴリに含まれる PC の設定アプリや、コマンド プロンプトの ipconfig、エミュレーター ツール ダイアログの [ネットワーク] タブでデスクトップ アダプターのエントリーを探すなどの方法で取得できます。

また、デバイス ポータルのポート マッピングを追加すると、エミュレーターをリモートで制御できます。これには、エミュレーターのインストールに含まれる認識シミュレーション制御ツールを使用する方法と、認識シミュレーション制御 API を使用してホスト PC の IP アドレスとデバイス ポータルの外部ポート (上記の例では 8080) に接続する方法があります。  認識シミュレーション制御を使用してエミュレーターにリモートで接続して制御する場合は、PC の IP アドレスと構成されているポートのみを指定します。  https:// は含めないでください。

既定では、ポート マッピングは存在しません。  構成するマッピングはすべて、HoloLens 2 エミュレーターの起動に対して永続的で、エミュレーターが完全に起動すると自動的に有効になります。

マッピングをファイルに保存するには、[エクスポート] ボタンを使用します。  こうすることにより、このファイルを他のチーム メンバーが [インポート] ボタンを使用して共有し、同じマッピングを自動的に構成できるようになります。

![HoloLens エミュレーターの [NAT 構成] タブ](images/emulator-natconfig-500px.png)

### <a name="updates-tab"></a>[更新] タブ

このタブは、Windows 10 May 2019 Update 以降でエミュレーターを実行している場合にのみ表示されます。

スタートアップ時に、エミュレーターは新しいバージョンを確認します。  新しいバージョンが入手可能な場合、エミュレーターは、現在使用しているバージョンと入手可能なバージョンを表示し、更新するかどうかを確認するプロンプトを表示します。  [はい] を選択すると、新しいバージョンのインストーラーがダウンロードされます。

[更新] タブでは、このタブの [更新プログラムを自動的にチェックする] チェック ボックスを切り替えることにより、エミュレーターが新しいバージョンをチェックするかどうかを制御できます。また、2019 年 9 月の更新プログラム以降、入手可能な他のバージョンのエミュレーターを確認してダウンロードすることもできます。  現在実行されている以外のバージョンについては、ダウンロード リンクが提供されます。  このリンクをクリックすると、そのバージョンのインストーラーがダウンロードされます。

![HoloLens エミュレーターの [更新] タブ](images/emulator-updates-500px.png)

### <a name="using-a-windows-mixed-reality-immersive-headset-and-motion-controllers-with-the-hololens-2-emulator"></a>HoloLens 2 エミュレーターで Windows Mixed Reality イマーシブ ヘッドセットとモーション コントローラーを使用する

HoloLens 2 エミュレーター (Windows Holographic、バージョン 2004) 以降では、Windows Mixed Reality ヘッドセットとモーション コントローラーを使用して、HoloLens 2 エミュレーターをステレオで表示して操作できます。  これにより、HoloLens 2 デバイスを使用しなくても、頭と手を使ってより高速かつ自然な動きができます。  これは、HoloLens 2 デバイスに完全に置き換わるものではなく、キーボード、マウス、ゲームパッドを使用して 2D のデスクトップ ウィンドウで行うエミュレーターの操作を超えた、より優れたエクスペリエンスを提供することを目的としたものであることにご注意ください。  この機能を有効にするには:

1. Windows Mixed Reality が使用する PC 上に構成されており、Windows Mixed Reality イマーシブ ヘッドセットが接続されていることを確認します。
2. HoloLens 2 エミュレーターを起動します
3. ツール バー ボタンをクリックするか、F7 キーを押して、シミュレーション パネルを開きます。
4. パネルを一番下までスクロールします。
5. [Use HMD for simulation]\(HMD をシミュレーションに使用する\) というラベルが付いたボックスをオンにします
6. Windows Mixed Reality が起動し、エミュレーターの表示が若干変わります。  ヘッドセットを使用しない場合、エミュレーターでは両方の目が頭の中央に配置され、目は 1 つのみ表示されます。  ヘッドセットを使用すると、エミュレーターによって真のステレオ出力が生成されます。デスクトップ ウィンドウには目は 1 つのみレンダリングされますが、ヘッドセットには両方の目がレンダリングされます。
7. オプションで、モーション コントローラーを 1 つまたは両方オンにします。  コントローラーの入力は、エミュレーターのハンド入力にマップされます。  たとえば、タップする場合は、モーション コントローラーのトリガーを引きます。  移動するには、サムスティックを使用します。  コントロールの完全な一覧については、「[高度な HoloLens エミュレーターと Mixed Reality Simulator の入力](advanced-hololens-emulator-and-mixed-reality-simulator-input.md)」を参照してください

ヘッドセットでのコンテンツ表示に問題がある場合:

- ヘッドセットと Mixed Reality ポータルの両方でディスプレイに何も表示されていないのに、デスクトップの HoloLens 2 エミュレーター ウィンドウにコンテンツが表示されている場合は、エミュレーターでハードウェア グラフィック アクセラレータが有効になっていることを確認します。  Windows Mixed Reality イマーシブ ヘッドセットをサポートするには、エミュレーターでハードウェア グラフィック アクセラレータが有効になっている必要があります。
- ヘッドセットにコンテンツが表示されているものの、ホログラムがぼやけているか、画像が二重に表示される場合は、次の手順に従ってステレオ表示を自分の目に合わせて調整します。

1. [Use HMD for simulation]\(HMD をシミュレーションに使用する\) を一時的にオフにします。
2. レジストリ エディター (regedit.exe) を起動します
3. HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\PerceptionSimulation に移動します
4. "EnableEyePoseControl" という名前の新しい DWORD 値を作成し、その値を 1 に設定します。
5. エミュレーターで [Use HMD for simulation]\(HMD をシミュレーションに使用する\) を有効にします。
6. ヘッドセットにコンテンツが表示されたら、方向キーを使用して、目の動きを調整します。  左目を調整する場合は左側の Alt キーを押したままにし、右目を調整する場合は右側の Alt キーを押したままにします。  それぞれの目の動きを調整するには、その目を調整するための適切な Alt キーを押したまま、'Q' キーと 'E' キーを使用します。  目の間隔を調整するには、'+' キーと '-' キーを使用します。  (テンキーの + または - は機能しませんので、ご注意ください。  メイン キーボードのボタンを使用してください。)
7. ステレオ表示が正しく表示されたら、'S' キーを押して、変更を保存します。  この新しい構成は、将来エミュレーターを起動するときのために保存されます。
8. 変更を破棄して以前の構成に戻す場合は、'L' キーを押して、既定の構成または以前の構成を読み込みます。
9. レジストリの "EnableEyePoseControl" 値を 0 に変更し、[Use HMD for simulation]\(HMD をシミュレーションに使用する\) オプションを切り替えます。

保存した構成を削除する必要がある場合は、HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\PerceptionSimulation の "DisplayConfiguration" という名前の値を削除します。  エミュレーターでヘッドセットを使用している場合、この変更が有効になったことを確認するには、[Use HMD for simulation]\(HMD をシミュレーションに使用する\) を一旦オフにしてからオンにし直す必要があります。

## <a name="anatomy-of-the-hololens-1st-gen-emulator"></a>HoloLens (第 1 世代) エミュレーターの構造

### <a name="main-window"></a>メイン ウィンドウ

エミュレーターを起動すると、HoloLens OS を表示するウィンドウが表示されます。

![HoloLens エミュレーターのメイン ウィンドウ](images/emulator-890px.png)

### <a name="toolbar"></a>ツール バー

メイン ウィンドウの右側には、エミュレーター ツールバーが表示されます。 ツールバーには、次のボタンが含まれています。
* ![閉じるアイコン](images/emulator-close.png) **閉じる**:エミュレーターを閉じます。
* ![最小化アイコン](images/emulator-minimize.png) **最小化**:エミュレーターのウィンドウを最小化します。
* ![ヒューマン入力アイコン](images/emulator-control.png) **ヒューマン入力**:マウスとキーボードを使用して人間に関する[エミュレーター入力](#basic-emulator-input)をシミュレートします。
* ![キーボードとマウス入力アイコン](images/emulator-input.png) **キーボードとマウス入力**:キーボードとマウスの入力は、Bluetooth でキーボードやマウスを接続する場合と同じように、キーボードおよびマウス イベントとして直接 HoloLens OS に渡されます。
* ![画面のサイズに合わせるアイコン](images/emulator-fit.png) **画面のサイズに合わせる**:エミュレーターが画面に収まるようにします。
* ![ズーム アイコン](images/emulator-zoom.png) **ズーム**:エミュレーターを大きくしたり小さくしたりします。
* ![ヘルプ アイコン](images/emulator-help.png) **ヘルプ**:エミュレーターのヘルプを開きます。
* ![デバイス ポータルを開くアイコン](images/emulator-deviceportal.png) **デバイス ポータルを開く**:エミュレーターで HoloLens OS の Windows デバイス ポータルを開きます。
* ![ツール アイコン](images/emulator-tools.png) **ツール**: **[その他のツール]** ウィンドウを開きます。

### <a name="simulation-tab"></a>[シミュレーション] タブ

**[その他のツール]** ウィンドウの既定のタブは、 **[シミュレーション]** タブです。

![HoloLens エミュレーターの [その他のツール] ウィンドウ](images/emulator-simulation-500px.png)

[シミュレーション] タブには、エミュレーター内で HoloLens OS を動作させるために使用される疑似センサーの現在の状態が表示されます。 [シミュレーション] タブの任意の値にカーソルを合わせると、その値を制御する方法を説明するヒントが表示されます。

### <a name="room-tab"></a>[部屋] タブ

エミュレーターは、疑似ルームによる空間マッピング メッシュという形式で、世界からの入力をシミュレートします。 このタブを使用すると、既定のルームの代わりに読み込むルームを選択できます。

![HoloLens エミュレーターの [部屋] タブ](images/emulator-room-500px.png)

詳細については、「[疑似ルーム](#simulated-rooms)」を参照してください。

### <a name="account-tab"></a>[アカウント] タブ

[アカウント] タブでは、Microsoft アカウントでサインインするようにエミュレーターを構成できます。 これは、ユーザーによるアカウントへのサインインが要求される API をテストする際に便利です。 このページのボックスをオンにした後、次回以降にエミュレーターを起動すると、初めて HoloLens を開始する場合と同様にサインインが求められます。

## <a name="simulated-rooms"></a>疑似ルーム

疑似ルームは、複数の環境でアプリケーションをテストする際に便利です。 エミュレーターには、いくつかのルームが付属しています。 エミュレーターがインストールしてある場合、%ProgramFiles(x86)%\Windows Kits\10\Microsoft XDE\\(version)\Plugins\Rooms にルームが格納されています。 これらのルームは、すべて実際の環境で HoloLens を使用してキャプチャされました。
* **DefaultRoom.xef** - テレビ、コーヒー テーブル、2 つのソファがある小さなリビング ルームです。 エミュレーターを起動すると、既定で読み込まれます。
* **Bedroom1.xef** - 机がある小さな寝室です。
* **Bedroom2.xef** - クイーン サイズのベッド、ドレッサー、ナイトテーブル、大きなクローゼットがある寝室です。
* **GreatRoom.xef** - リビング ルーム、ダイニング テーブル、およびキッチンのある広い居間です。
* **LivingRoom.xef** - 暖炉、ソファ、肘掛け椅子、花瓶の乗ったコーヒー テーブルがあるリビング ルームです。

HoloLens (第 1 世代) で [Windows デバイス ポータル](using-the-windows-device-portal.md)のシミュレーションのページを使用すると、自分の部屋を記録してエミュレーターで使用することもできます。

エミュレーターでは、表示するホログラムのみ見えます。 しかし、ホログラムの背後にある疑似ルームは見えません。 この点は、両方がブレンディングされて表示される実際の HoloLens とは異なります。 HoloLens エミュレーターで疑似ルームを見たい場合は、アプリケーションを更新してシーン内の空間マッピング メッシュを表示する必要があります。

## <a name="known-issues"></a>の既知の問題

* HoloLens 2 エミュレーターをアンインストールするときに、ハード ドライブの Windows Kits\10\Emulation\HoloLens\<build number> フォルダーに、ハード ディスク イメージ (Flash.vhdx) が残ったままになる場合があります。  このファイルは削除しても問題ありません。
* ハードウェア グラフィック アクセラレータが原因で、AMD または Intel のグラフィックスを使用している一部のシステムではホログラフィック アプリがクラッシュする場合があります。  エミュレーターの [ツール] ウィンドウでハードウェア グラフィック アクセラレータを無効にすることにより、この問題を回避できます。
* 2020 年 7 月時点の最新の Windows 更新プログラムをインストールすると、HoloLens エミュレーター (第 1 世代) のハードウェア グラフィックス アクセラレータが使用できなくなる可能性があります。
ハードウェア グラフィックス アクセラレータに必要だった RemoteFX コンポーネントは非推奨になったため、今後の Windows リリースで削除される予定です。  ハードウェア グラフィックス アクセラレータを再び有効にするには、[Enable-VMRemoteFXPhysicalVideoAdapter PowerShell コマンドレット](https://docs.microsoft.com/powershell/module/hyper-v/enable-vmremotefxphysicalvideoadapter?view=win10-ps)を使用します。  詳細については、[Windows での RemoteFX サポートの非推奨化と削除に関するドキュメント](https://support.microsoft.com/help/4570006/update-to-disable-and-remove-the-remotefx-vgpu-component)を参照してください。 

## <a name="troubleshooting"></a>トラブルシューティング

エミュレーターのインストール中に、 *"Visual Studio 2015 Update 1 と UWP ツール バージョン 1.2"* が必要であることを示すエラー メッセージが表示される場合があります。 このエラーには、3 つの原因が考えられます。
* Visual Studio のバージョン (Visual Studio 2019、Visual Studio 2017 または Visual Studio 2015 Update 1 またはそれ以降) が新しくない。 これを修正するには、Visual Studio の最新リリースをインストールします。
* Visual Studio のバージョンは新しいが、ユニバーサル Windows プラットフォーム (UWP) ツールがインストールされていない。 これは、Visual Studio のオプション機能です。 HoloLens (第 1 世代) では、Visual Studio 2015 または Visual Studio 2017 用の UWP ツールが必要です。

Pro/Enterprise/Education SKU でない Windows 、または Hyper-V 機能が有効になっていない場合にエミュレーターをインストールすると、エラーが表示される場合があります。
* すべての要件については、上記の「[システム要件](#hololens-emulator-system-requirements)」セクションを参照してください。
* また、システムで Hyper-V 機能が有効になっていることを確認してください。

インストールが正常に完了したにもかかわらず、展開やデバッグのオプションに HoloLens エミュレーターが表示されない場合は、次の点を確認してください。
* Visual Studio のプロジェクト構成が x86 (HoloLens 第 1 世代) であるか、x86 または x64 (HoloLens 2 エミュレーター) に設定されている。
* Visual Studio 2019 を使用しており、プロジェクト構成のプラットフォーム ツールセットが v142 に設定されている。

インストールが正常に完了したにもかかわらず、HoloLens エミュレーターを起動しようとしたときに Visual Studio にエラーが表示された場合は、次をやり直してください。
* Visual Studio を管理者として実行します。
* Visual Studio 2019 しかインストールしたことがない場合は、HKEY_LOCAL_MACHINE\Software\Microsoft\Windows Kits\Installed Roots のレジストリ値「KitsRoot10」が 32 ビットの Program Files フォルダーを指していることを確認します (例: "C:\Program Files (x86)\Windows Kits\10")。  そうでない場合は、HoloLens のエミュレーターをアンインストールし、レジストリ値を 32 ビットの Program Files フォルダーに変更してから、HoloLens のエミュレーターを再インストールします。  この問題は、Visual Studio 2019 16.0.3 で対処されます。

エミュレーターの起動時に [無効なバイト エンコード] エラー ダイアログが表示される場合は、次のようにします。
* %localappdata%\Microsoft\XDE\HCS 内のすべてのファイルを削除してからやり直します。

Visual Studio のデバッグ ターゲット リストが空 (たとえば、[スタート] が唯一のオプション) で、上記すべてのトラブルシューティングの手順に従っている場合は、次のようにします。
* %localappdata%\Microsoft\VisualStudio\\<*installation id*>\CoreCon の「ConfigurationCache」フォルダーを削除してやり直します。

エミュレーターを開始するときにシステムがハングする場合は、エミュレーターのグラフィックスのハードウェア アクセラレータを無効にします。
* HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\XDE\10.0 に「DisableGPU」という名前のレジストリ DWORD 値を作成し、値を 1 に設定します。

## <a name="see-also"></a>関連項目
* [高度な HoloLens エミュレーターと Mixed Reality Simulator の入力](advanced-hololens-emulator-and-mixed-reality-simulator-input.md)
* [HoloLens のエミュレーターのソフトウェアの歴史](hololens-emulator-archive.md)
* [Unity の空間マッピング](spatial-mapping-in-unity.md)
* [DirectX の空間マッピング](spatial-mapping-in-directx.md)
