---
title: 4. シーンを対話型にする
description: Unreal Engine 4 と Mixed Reality Toolkit UX Tools プラグインを使用して簡単なチェス アプリを構築するチュートリアルのパート 4
author: sw5813
ms.author: suwu
ms.date: 5/5/2020
ms.topic: article
ms.localizationpriority: high
keywords: Unreal, Unreal Engine 4, UE4, HoloLens, HoloLens 2, Mixed Reality, チュートリアル, 入門, mrtk, uxt, UX ツール, ドキュメント
ms.openlocfilehash: 2e4d26ed4e0b8199bfc629016aea688bd1c41ef8
ms.sourcegitcommit: 09d9fa153cd9072f60e33a5f83ced8167496fcd7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/18/2020
ms.locfileid: "83520027"
---
# <a name="4-making-your-scene-interactive"></a><span data-ttu-id="ad252-104">4.シーンを対話型にする</span><span class="sxs-lookup"><span data-stu-id="ad252-104">4. Making your scene interactive</span></span>

<span data-ttu-id="ad252-105">このセクションでは、オープン ソースの Mixed Reality Toolkit UX Tools プラグインについて説明します。このプラグインには、シーンを簡単に対話型にするための一連のツールが用意されています。</span><span class="sxs-lookup"><span data-stu-id="ad252-105">This section introduces you to the open source Mixed Reality Toolkit UX Tools plugin, which provides a set of tools to easily make your scene interactive.</span></span> <span data-ttu-id="ad252-106">このセクションを終えると、チェスの駒がユーザー入力に応答するようになります。</span><span class="sxs-lookup"><span data-stu-id="ad252-106">By the end of this section, your chess pieces will respond to user input.</span></span> 

## <a name="objectives"></a><span data-ttu-id="ad252-107">目標</span><span class="sxs-lookup"><span data-stu-id="ad252-107">Objectives</span></span>

* <span data-ttu-id="ad252-108">プロジェクトに Mixed Reality Toolkit UX Tools プラグインを含める</span><span class="sxs-lookup"><span data-stu-id="ad252-108">Include the Mixed Reality Toolkit UX Tools plugin in your project</span></span>
* <span data-ttu-id="ad252-109">ハンド インタラクション アクターを指先に追加する</span><span class="sxs-lookup"><span data-stu-id="ad252-109">Add Hand Interaction Actors to your fingertips</span></span>
* <span data-ttu-id="ad252-110">マニピュレーターを作成してチェス ボードと駒にアタッチする</span><span class="sxs-lookup"><span data-stu-id="ad252-110">Create and attach Manipulators to your chess board and pieces</span></span> 
* <span data-ttu-id="ad252-111">入力シミュレーションを使用してプロジェクトを検証する</span><span class="sxs-lookup"><span data-stu-id="ad252-111">Use input simulation to validate your project</span></span>

## <a name="download-the-mixed-reality-toolkit-ux-tools-plugin"></a><span data-ttu-id="ad252-112">Mixed Reality Toolkit UX Tools プラグインをダウンロードする</span><span class="sxs-lookup"><span data-stu-id="ad252-112">Download the Mixed Reality Toolkit UX Tools plugin</span></span>

1.  <span data-ttu-id="ad252-113">[UX Tools GitHub リポジトリ](https://github.com/microsoft/MixedReality-UXTools-Unreal/releases)から、MRTK UX Tools プラグインの最新リリースをクローンまたはダウンロードして解凍します</span><span class="sxs-lookup"><span data-stu-id="ad252-113">Clone or download and unzip the latest release of the MRTK UX Tools plugin from the [UX Tools GitHub repository](https://github.com/microsoft/MixedReality-UXTools-Unreal/releases)</span></span>

2.  <span data-ttu-id="ad252-114">チェス プロジェクトのルート フォルダーに、"Plugins" という名前の新しいフォルダーを作成します。</span><span class="sxs-lookup"><span data-stu-id="ad252-114">In your chess project root folder, create a new folder called “Plugins”.</span></span> <span data-ttu-id="ad252-115">解凍した UXTools プラグインをこのフォルダーにコピーします。</span><span class="sxs-lookup"><span data-stu-id="ad252-115">Copy your unzipped UXTools plugin into this folder.</span></span> <span data-ttu-id="ad252-116">Unreal エディターを再起動します。</span><span class="sxs-lookup"><span data-stu-id="ad252-116">Restart the Unreal editor.</span></span> 

![プロジェクト プラグイン フォルダーを作成する](images/unreal-uxt/4-plugins.PNG)

3.  <span data-ttu-id="ad252-118">再起動後、ソース パネルに UXTools プラグイン コンテンツが表示されない場合は、 **[View Options]\(表示オプション\) > [Show Plugin Content]\(プラグイン コンテンツの表示\)** をクリックしてください。</span><span class="sxs-lookup"><span data-stu-id="ad252-118">After restarting, if you don’t see UXTools plugin content in your sources panel, you may need to click on **View Options > Show Plugin Content**.</span></span> <span data-ttu-id="ad252-119">UXTools プラグインでは、Content フォルダー内に、ポインター、入力シミュレーション、および単純なボタンが提供され、C++ Classes フォルダー内に、関数別のサブフォルダーが提供されます。</span><span class="sxs-lookup"><span data-stu-id="ad252-119">You’ll see that the UXTools plugin provides a Content folder with Pointers, Input Simulation, and a Simple Button, as well as a C++ Classes folder with subfolders separated by function.</span></span>  

![プラグイン コンテンツを表示する](images/unreal-uxt/4-showplugincontent.PNG)

## <a name="spawn-hand-interaction-actors"></a><span data-ttu-id="ad252-121">ハンド インタラクション アクターを生成する</span><span class="sxs-lookup"><span data-stu-id="ad252-121">Spawn Hand Interaction Actors</span></span>

1.  <span data-ttu-id="ad252-122">まず、MRPawn からハンド インタラクション アクターを生成します。1) ポーンの人差し指の先にカーソルを設定して、MRPawn を視覚化できます。2) ポーンから多関節ハンド入力イベントを提供できます (これにより、アクターを直接操作できます)。3) 手の平から伸びるハンド レイを使って、遠隔インタラクション入力イベントを提供できます。</span><span class="sxs-lookup"><span data-stu-id="ad252-122">Let’s start by spawning Hand Interaction Actors from our MRPawn so that 1) we can visualize MRPawn with a cursor on the tips of the Pawn’s index fingers, 2) we can provide articulated hand input events (and thus, directly manipulate actors) through the Pawn, and 3) we can provide far interaction input events through hand rays extending from our palms.</span></span> <span data-ttu-id="ad252-123">**MRPawn** ブループリントを開き、 **[Event Graph]\(イベント グラフ\)** に移動します。</span><span class="sxs-lookup"><span data-stu-id="ad252-123">Open the **MRPawn** Blueprint and navigate to the **Event Graph**.</span></span> 

2.  <span data-ttu-id="ad252-124">Event BeginPlay から実行ピンをドラッグ アンド リリースして、新しいノードを配置します。</span><span class="sxs-lookup"><span data-stu-id="ad252-124">Drag the execution pin from Event BeginPlay and release to place a new node.</span></span> <span data-ttu-id="ad252-125">**Spawn Actor from Class** ノードを選択します。</span><span class="sxs-lookup"><span data-stu-id="ad252-125">Select the **Spawn Actor from Class** node.</span></span> <span data-ttu-id="ad252-126">**[クラス]** ピンの横にあるドロップダウンをクリックし、**Uxt ハンド インタラクション アクター**を検索します。</span><span class="sxs-lookup"><span data-stu-id="ad252-126">Click the dropdown next to the **Class** pin and search for **Uxt Hand Interaction Actor**.</span></span> <span data-ttu-id="ad252-127">SpawnActor Uxt Hand Interaction ノードから実行ピンをドラッグ アンド リリースし、Uxt Hand Interaction Actor クラスに含まれる **Set Hand** 関数を検索します。</span><span class="sxs-lookup"><span data-stu-id="ad252-127">Drag the execution pin from the SpawnActor Uxt Hand Interaction node, release, and search for the **Set Hand** function contained in the Uxt Hand Interaction Actor class.</span></span> <span data-ttu-id="ad252-128">SpawnActor ノードの戻り値を Set Hand ノードの [ターゲット] ピンに接続して、ハンド インタラクショ ンアクターの手を **[左]** に設定します。</span><span class="sxs-lookup"><span data-stu-id="ad252-128">Connect the SpawnActor node’s Return Value to the Target pin of the Set Hand node to set the hand of the Hand Interaction Actor to **Left**.</span></span> <span data-ttu-id="ad252-129">もう 1 つの **Uxt ハンド インタラクション アクター**を生成します。今回は、手を **[右]** に設定します。これにより、イベントが開始されると、Uxt ハンド インタラクション アクターがそれぞれの手で生成されます。</span><span class="sxs-lookup"><span data-stu-id="ad252-129">Spawn a second **Uxt Hand Interaction Actor**, this time setting the hand to **Right**, so that when the event begins, a Uxt Hand Interaction Actor will be spawned on each hand.</span></span> 

![Uxt ハンド インタラクション アクターを生成する](images/unreal-uxt/4-spawnactor.PNG)

3.  <span data-ttu-id="ad252-131">次に、Uxt ハンド インタラクション アクターに、最初の変換 (ここで生成を行う) と所有者を提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ad252-131">Next, we need to provide our Uxt Hand Interaction Actors with an initial transform at which to spawn, and an owner.</span></span> <span data-ttu-id="ad252-132">**Spawn Transform** ピンの 1 つからピンをドラッグ アンド リリースして、新しいノードを配置します。</span><span class="sxs-lookup"><span data-stu-id="ad252-132">Drag the pin off one of the **Spawn Transform** pins and release to place a new node.</span></span> <span data-ttu-id="ad252-133">**Make Transform** ノードを検索します。</span><span class="sxs-lookup"><span data-stu-id="ad252-133">Search for the **Make Transform** node.</span></span> <span data-ttu-id="ad252-134">最初の変換は実際には問題ではありません。というのは、ハンド インタラクション アクターでは、表示されるとすぐに作成した手にジャンプするからです (作成済みのコードが UX Tools プラグイン内に用意されています)。それ以外の場合は、表示されなくなります。</span><span class="sxs-lookup"><span data-stu-id="ad252-134">The initial transform really doesn’t matter since the Hand Interaction Actors will jump to our hands as soon as they are visible (code that’s already written for us in the UX Tools plugin), otherwise, they’ll disappear.</span></span> <span data-ttu-id="ad252-135">ただし、SpawnActor 関数では、コンパイラ エラーを回避するために入力として変換が必要なため、Make Transform の既定値はそのままにします。</span><span class="sxs-lookup"><span data-stu-id="ad252-135">However, the SpawnActor function requires a Transform as input to avoid a compiler error, so we’ll just leave the default values in Make Transform as is.</span></span> <span data-ttu-id="ad252-136">Make Transform の**戻り値**を、もう片方の手のインタラクション アクターの Spawn Transform にもドラッグします。</span><span class="sxs-lookup"><span data-stu-id="ad252-136">Drag Make Transform’s **Return Value** to the other hand’s Interaction Actor Spawn Transform as well.</span></span> 

4.  <span data-ttu-id="ad252-137">両方の SpawnActor ノードの下部にある**下矢印**をクリックして、 **[所有者]** ピンを表示します。</span><span class="sxs-lookup"><span data-stu-id="ad252-137">Click the **down arrow** at the bottom of both SpawnActor nodes to reveal the **Owner** pin.</span></span> <span data-ttu-id="ad252-138">**[所有者]** ピンの 1 つからピンをドラッグ アンド リリースして、新しいノードを配置します。</span><span class="sxs-lookup"><span data-stu-id="ad252-138">Drag the pin off one of the **Owner** pins and release to place a new node.</span></span> <span data-ttu-id="ad252-139">"Self" を検索し、**Get a reference to self** 変数を選択します。</span><span class="sxs-lookup"><span data-stu-id="ad252-139">Search for “self” and select the **Get a reference to self** variable.</span></span> <span data-ttu-id="ad252-140">Self オブジェクト参照ノードともう一方のハンド インタラクション アクターの [所有者] ピンの間にもリンクを作成します。</span><span class="sxs-lookup"><span data-stu-id="ad252-140">Create a link between the Self object reference node and the other Hand Interaction Actor’s Owner pin as well.</span></span> <span data-ttu-id="ad252-141">ブループリントが読みやすくなるようにノードを自由にドラッグします。</span><span class="sxs-lookup"><span data-stu-id="ad252-141">Feel free to drag around nodes to make your Blueprint more readable.</span></span> <span data-ttu-id="ad252-142">**コンパイル**と**保存**を行って、メイン ウィンドウに戻ります。</span><span class="sxs-lookup"><span data-stu-id="ad252-142">**Compile**, **save**, and return to the Main window.</span></span> 

![Uxt ハンド インタラクション アクターのセットアップを完了する](images/unreal-uxt/4-fingerptrs.PNG)

<span data-ttu-id="ad252-144">MRTK UX Tools プラグインに用意されているハンド インタラクション アクターの詳細については、公式の[ドキュメント](https://microsoft.github.io/MixedReality-UXTools-Unreal/version/public/0.8.x/Docs/HandInteraction.html)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad252-144">For more information about the Hand Interaction Actor provided in the MRTK UX Tools plugin, check out the official [documentation](https://microsoft.github.io/MixedReality-UXTools-Unreal/version/public/0.8.x/Docs/HandInteraction.html).</span></span>

## <a name="attach-manipulators"></a><span data-ttu-id="ad252-145">マニピュレーターをアタッチする</span><span class="sxs-lookup"><span data-stu-id="ad252-145">Attach Manipulators</span></span>

1.  <span data-ttu-id="ad252-146">次に、マニピュレーターをチェス ボードとキング アクターにアタッチします。</span><span class="sxs-lookup"><span data-stu-id="ad252-146">Next, we’ll attach Manipulators to our chess board and king Actors.</span></span> <span data-ttu-id="ad252-147">マニピュレーターは、多関節ハンド入力に応答するコンポーネントであり、つかむ、回転する、変換することができます。マニピュレーターの変換をアクターの変換に適用すると、アクターを直接操作することができます。</span><span class="sxs-lookup"><span data-stu-id="ad252-147">A Manipulator is a component that responds to articulated hand input and can be grabbed, rotated, and translated; by applying the Manipulator’s transform to that of an Actor, Actors can be directly manipulated.</span></span> 

2.  <span data-ttu-id="ad252-148">ボードのブループリントを開きます。</span><span class="sxs-lookup"><span data-stu-id="ad252-148">Open your Board Blueprint.</span></span> <span data-ttu-id="ad252-149">**[コンポーネント]** パネルで、 **[コンポーネントの追加]** をクリックし、**Uxt 汎用マニピュレーター**を検索します。</span><span class="sxs-lookup"><span data-stu-id="ad252-149">In the **Components** panel, click **Add Component** and search for **Uxt Generic Manipulator**.</span></span> <span data-ttu-id="ad252-150">[詳細] パネルには **[Generic Manipulator]\(汎用マニピュレーター\)** というセクションがあり、片手または両手の操作、回転モード、スムージングを有効にするかどうかを設定できます。</span><span class="sxs-lookup"><span data-stu-id="ad252-150">In the Details panel, you’ll find a section titled **Generic Manipulator** where you can set whether you want to enable one-handed or two-handed manipulation, the rotation mode, and smoothing.</span></span> <span data-ttu-id="ad252-151">好きなモードを自由に選択して、ボードを**コンパイル**し、**保存**します。</span><span class="sxs-lookup"><span data-stu-id="ad252-151">Feel free to select whichever modes you wish, then **Compile** and **Save** Board.</span></span> 

![汎用マニピュレーターを追加する](images/unreal-uxt/4-addmanip.PNG)

![モードを設定する](images/unreal-uxt/4-setrotmode.PNG)

3.  <span data-ttu-id="ad252-154">WhiteKing アクターについて上記の手順を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="ad252-154">Repeat the steps above for the WhiteKing Actor.</span></span>

<span data-ttu-id="ad252-155">MRTK UX Tools プラグインに用意されているマニピュレーター コンポーネントの詳細については、公式の[ドキュメント](https://microsoft.github.io/MixedReality-UXTools-Unreal/version/public/0.8.x/Docs/Manipulator.html)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad252-155">For more information about the Manipulator Components provided in the MRTK UX Tools plugin, visit the official [documentation](https://microsoft.github.io/MixedReality-UXTools-Unreal/version/public/0.8.x/Docs/Manipulator.html).</span></span>

## <a name="test-out-your-scene-with-simulated-hands"></a><span data-ttu-id="ad252-156">シミュレートされた手を使ってシーンをテストする</span><span class="sxs-lookup"><span data-stu-id="ad252-156">Test out your scene with simulated hands</span></span>

1.  <span data-ttu-id="ad252-157">メイン ウィンドウで **[プレイ]** を押します。</span><span class="sxs-lookup"><span data-stu-id="ad252-157">In the Main window, press **Play**.</span></span> <span data-ttu-id="ad252-158">MRTK UX Tools プラグインから 2 つのメッシュ ハンドが提供され、それぞれの手の平からハンド レイが伸びているのを確認します。</span><span class="sxs-lookup"><span data-stu-id="ad252-158">You should see two mesh hands provided by the MRTK UX Tools plugin, with hand rays extending from each hand’s palm!</span></span> 

![ビューポート内のシミュレートされた手](images/unreal-uxt/4-handsim.PNG)

2.  <span data-ttu-id="ad252-160">**右手**を制御するには、**左 Alt** ボタンを押したままにします。</span><span class="sxs-lookup"><span data-stu-id="ad252-160">To control the **right hand**, hold down the **left Alt** button.</span></span> <span data-ttu-id="ad252-161">マウスを動かして手を動かします。</span><span class="sxs-lookup"><span data-stu-id="ad252-161">Move your mouse to move the hand.</span></span> <span data-ttu-id="ad252-162">**マウス ホイール**を使用してスクロールして、手を**前方**または**後方**に移動します。</span><span class="sxs-lookup"><span data-stu-id="ad252-162">Scroll with your **mouse wheel** to move the hand **forwards** or **backwards**.</span></span> <span data-ttu-id="ad252-163">左マウスをクリックして**ピンチ**、マウスの中央ボタンをクリックして**指さし**を行います。</span><span class="sxs-lookup"><span data-stu-id="ad252-163">Click your left mouse to **pinch**, click the middle mouse button to **poke**.</span></span>

3.  <span data-ttu-id="ad252-164">**左手**を制御するには、**左 Shift** ボタンを押したままにします。</span><span class="sxs-lookup"><span data-stu-id="ad252-164">To control the **left hand**, hold down the **left Shift** button.</span></span> <span data-ttu-id="ad252-165">左手を移動するためのコントロールは、右側のコントロールと同じです。</span><span class="sxs-lookup"><span data-stu-id="ad252-165">The controls for moving the left hand are the same as those for the right hand.</span></span> 

4.  <span data-ttu-id="ad252-166">ここで、シミュレートされた手を使用して、チェスの白キングを手に取り、移動して、置いてみましょう。</span><span class="sxs-lookup"><span data-stu-id="ad252-166">Now try using the simulated hands to pick up, move, and set down the white chess king.</span></span> <span data-ttu-id="ad252-167">ボードを操作することもできます。</span><span class="sxs-lookup"><span data-stu-id="ad252-167">You can also manipulate the board!</span></span> <span data-ttu-id="ad252-168">近接インタラクションと遠隔インタラクションの両方を試してみてください。手がボードとキングを直接つかめる位置まで近づくと、ハンド レイが消え、人差し指の先が指カーソルに置き換わります。</span><span class="sxs-lookup"><span data-stu-id="ad252-168">Experiment with both near and far interaction- notice that when your hands get close enough to grab the board and king directly, the hand ray disappears and is replaced with a finger cursor on the index tip.</span></span> 

<span data-ttu-id="ad252-169">MRTK UX Tools プラグインに用意されているシミュレートされた手の機能の詳細については、公式の[ドキュメント](https://microsoft.github.io/MixedReality-UXTools-Unreal/version/public/0.8.x/Docs/InputSimulation.html)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad252-169">For more information about the simulated hands feature provided by the MRTK UX Tools plugin, visit the official [documentation](https://microsoft.github.io/MixedReality-UXTools-Unreal/version/public/0.8.x/Docs/InputSimulation.html).</span></span>

[<span data-ttu-id="ad252-170">次のセクション:5.ボタンの追加およびピースの位置のリセット</span><span class="sxs-lookup"><span data-stu-id="ad252-170">Next Section: 5. Adding a button & resetting piece locations</span></span>](unreal-uxt-ch5.md)
