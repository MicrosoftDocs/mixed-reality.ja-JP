---
title: 2. プロジェクトと最初のアプリケーションの初期化
description: Unreal Engine 4 と Mixed Reality ツールキット UX ツール プラグインを使用して簡単なチェス アプリを構築するためのチュートリアル シリーズのパート 6 の 2
author: hferrone
ms.author: v-haferr
ms.date: 06/10/2020
ms.topic: article
ms.localizationpriority: high
keywords: Unreal, Unreal Engine 4, UE4, HoloLens, HoloLens 2, Mixed Reality, チュートリアル, 入門, mrtk, uxt, UX ツール, ドキュメント
ms.openlocfilehash: 150fee721bb9cd72d287737aca4262bd87dccba8
ms.sourcegitcommit: 7ca383ef1c5dc895ca2a289435f2e9d4c1ee6e65
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/24/2020
ms.locfileid: "85345732"
---
# <a name="2-initializing-your-project-and-first-application"></a>2.プロジェクトと最初のアプリケーションの初期化

## <a name="overview"></a>概要

この最初のチュートリアルでは、HoloLens 2 用の新しい Unreal アプリケーションの使用を開始します。 これには、HoloLens プラグインの追加、レベルの作成と照明、およびゲーム ボードとチェスの駒の設定が含まれます。 3D チェスの駒とオブジェクト マテリアルには、事前に作成された資産を使用するため、何もないところからモデリングする必要はありません。 このチュートリアルを完了するまでに、複合現実に対応できる空のキャンバスが完成します。

続行する前に、「[はじめに](https://docs.microsoft.com/windows/mixed-reality/unreal-uxt-ch1)」ページにあるすべての前提条件を確認してください。

## <a name="objectives"></a>目標
* HoloLens 開発用の Unreal プロジェクトの構成
* 資産のインポートとシーンのセットアップ
* ブループリントを使用したアクターとスクリプトレベルのイベントの作成

## <a name="creating-a-new-unreal-project"></a>新しい Unreal プロジェクトの作成
最初に必要なのは、作業するプロジェクトです。 HoloLens 用の Unreal アプリを初めて作成する場合は、Epic Launcher から[サポート ファイルをダウンロードする](https://docs.microsoft.com/windows/mixed-reality/unreal-uxt-ch6#packaging-and-deploying-the-app)必要があります。

1. Unreal Engine を起動します。

2. **[New Project Categories]\(新規プロジェクトのカテゴリ\)** で、 **[ゲーム]** を選択して **[次へ]** をクリックします。 

![ゲーム プロジェクト テンプレートの選択](images/unreal-uxt/2-gamestemplate.png)

3. **[Blank]\(空のプロジェクト\)** テンプレートを選択して **[次へ]** をクリックします。 

![[Blank]\(空のプロジェクト\) テンプレートを選択する](images/unreal-uxt/2-template.PNG)

4. **[Project Settings]\(プロジェクト設定\)** で、 **[C++]** 、 **[Scalable 3D or 2D]\(3D または 2D に拡張可能\)** 、 **[No Starter Content]\(スターター コンテンツを有効にしない\)** を設定します。 
    * 保存場所を選択し、 **[プロジェクトの作成]** をクリックします。 

> [!NOTE]
> UX Tools プラグインをビルドするには、ブループリント プロジェクトではなく、C++ プロジェクトを選択する必要があります。UX Tools プラグインは、この後のセクション 4 でセットアップします。

![最初のプロジェクト設定](images/unreal-uxt/2-project-settings.PNG)

Unreal エディターでプロジェクトが自動的に開きます。つまり、次のセクションに進む準備はできています。

## <a name="enabling-required-plugins"></a>必要なプラグインの有効化
オブジェクトをシーンに追加する前に、2 つのプラグインを有効にする必要があります。

1. **[編集] > [プラグイン]** を開き、組み込みオプション リストから **[拡張現実]** を選択します。 
    * **HoloLens** まで下にスクロールし、 **[有効]** をオンにします。 

![HoloLens プラグインの有効化](images/unreal-uxt/2-plugins.PNG)

2. 組み込みオプション リストから **[仮想現実]** を選択します。 
    * **[Microsoft Windows Mixed Reality]** まで下にスクロールし、 **[有効]** をオンにして、エディターを再起動します。 

![Windows Mixed Reality プラグインを有効にする](images/unreal-uxt/2-virtual-reality-plugin.PNG)

> [!NOTE]
> HoloLens 2 の開発には、両方のプラグインが必要です。

これで空のレベルを使用できるようになりました。

## <a name="creating-a-level"></a>レベルの作成
次のタスクは、参照とスケール用の開始点とキューブを使用して単純なプレーヤーのセットアップを作成することです。

1. **[ファイル] > [新しいレベル]** を選択し、 **[空のレベル]** を選択します。 この時点では、ビューポートの既定のシーンは空です。

2. **[モード]** タブから **[基本]** を選択し、 **[PlayerStart]** をシーンにドラッグします。 
    * **[詳細]** タブで、 **[場所]** を **X = 0**、**Y = 0**、および **Z = 0**  に設定します。これにより、アプリの起動時にユーザーがシーンの中心に設定されます。

![PlayerStart を表示したビューポート](images/unreal-uxt/2-playerstart.PNG)

3. **[キューブ]** を **[基本]** タブからシーンにドラッグします。 
    * **[位置]** を **X = 50**、**Y = 0**、および **Z = 0** に設定します。 これにより、キューブは開始時にプレーヤーから 50 cm 離れた位置に配置されます。 
    * キューブを縮小するには、 **[スケール]** を **X = 0.2**、**Y = 0.2**、および **Z = 0.2** に変更します。 

シーンにライトを追加しない限り、キューブを表示することはできません。これは、シーンをテストする前の最後のタスクです。

4. **[モード]** パネルの **[Lights]\(ライト\)** タブに切り替えて、**Directional Light** をシーンにドラッグします。 ライトが見えるように、**PlayerStart** の上にライトを配置します。

![ライトが追加されたビューポート](images/unreal-uxt/2-light.PNG)

5. **[ファイル] > [現在を保存]** に移動し、レベルに **Main** という名前を付けて、 **[保存]** をクリックします。 

シーンを設定したら、ツールバーの **[再生]** を押して、キューブの動作を確認します。 作業内容を鑑賞したら、**Esc** を押してアプリケーションを停止します。

![ビューポート内のキューブ](images/unreal-uxt/2-cube.PNG)

シーンがセットアップされたので、チェス盤とピースを追加して、アプリケーション環境を完成させます。

## <a name="importing-assets"></a>資産のインポート
現在、シーンは空であるように見えますが、既製の資産をプロジェクトにインポートして修正します。

1. [GitHub](https://github.com/microsoft/MixedReality-Unreal-Samples/blob/master/ChessApp/ChessAssets.7z) 資産フォルダーをダウンロードして解凍します。

2. **[コンテンツ ブラウザー]** から **[新規追加] > [新しいフォルダー]** をクリックし、**ChessAssets** という名前を付けます。 
    * 新しいフォルダーをダブルクリックします。ここに 3D 資産をインポートします。

![ソース パネルの表示と非表示](images/unreal-uxt/2-showhidesources.PNG)

3. **[コンテンツ ブラウザー]** から **[インポート]** をクリックし、解凍した資産フォルダー内のすべての項目を選択して、 **[開く]** をクリックします。 
    * このフォルダーには、チェス盤の 3D オブジェクト メッシュと FBX 形式のピース、およびマテリアルに使用する TGA 形式のテクスチャ マップが含まれています。  

4. [FBX インポート オプション] ウィンドウが表示されたら、 **[マテリアル]** セクションを展開し、 **[マテリアルのインポート方法]** を **[マテリアルを作成しない]** に変更します。
    * **[Import All]\(すべてインポート\)** をクリックします。

![FBX インポート オプション](images/unreal-uxt/2-nocreatemat.PNG)

これで、資産に対して行う必要な操作は終わりました。 次の一連のタスクでは、ブループリントを使用してアプリケーションの構成要素を作成します。

## <a name="adding-blueprints"></a>ブループリントの追加

1. **[コンテンツ ブラウザー]** で、 **[新規追加] > [新しいフォルダー]** をクリックし、**Content Browser** という名前を付けます。 

> [!NOTE]
> [ブループリント](https://docs.unrealengine.com/en-US/Engine/Blueprints/index.html)を初めて使用する場合、これらのブループリントは、新しい種類のアクターとスクリプト レベルのイベントを作成するためのノードベースのインターフェースを提供する特別な資産になります。 

2. **[ブループリント]** フォルダーをダブルクリックし、右クリックして **[ブループリント クラス]** を選択します。         
    * **[Actor]\(アクター\)** を選択して、ブループリントに **Board** という名前を付けます。 

![ブループリントの親クラスを選択する](images/unreal-uxt/2-bpparent.PNG)

次のスクリーンショットに示すように、新しい **[ボード]** ブループリントが **[ブループリント]** フォルダーに表示されます。 

![新しい Board ブループリント](images/unreal-uxt/2-bpboard.PNG)

作成したオブジェクトにマテリアルを追加するためのすべての設定が完了しました。

## <a name="working-with-materials"></a>マテリアルの操作
作成したオブジェクトは既定で灰色になりますが、これはあまり見栄えのよいものではありません。 このチュートリアルの最後のタスク セットは、オブジェクトにマテリアルとメッシュを追加することです。

1. **[ボード]** をダブルクリックして、ブループリント エディターを開きます。 

2. **[コンポーネント]** パネルから **[コンポーネントの追加] > [シーン]** をクリックし、**Root** という名前を付けます。 以下のスクリーンショットでは、**Root** が **DefaultSceneRoot** の子として表示されていることに注意してください。

![ルートを置き換える](images/unreal-uxt/2-root-blueprint.PNG)


3. **ルート**をクリックアンドドラッグして **DefaultSceneRoot** に置換し、ビューポート内の球体を削除します。 

![ルートを置き換える](images/unreal-uxt/2-root.PNG)


4. **[コンポーネント]** パネルから **[コンポーネントの追加] > [静的メッシュ]** をクリックし、**SM_Board** という名前を付けます。 これは、**ルート**の下に子オブジェクトとして表示されます。

![スタティック メッシュの追加](images/unreal-uxt/2-sm-board.PNG)

4. **[SM_Board]** をクリックし、 **[詳細]** パネルの **[静的メッシュ]** セクションまで下にスクロールして、ドロップダウンから **[ChessBoard]** を選択します。 

![ビューポート内のボード メッシュ](images/unreal-uxt/2-sm-board-view.PNG)

5.  引き続き **[詳細]** パネルで、 **[マテリアル]** セクションを展開し、ドロップダウンから **[新しい資産の作成] > [マテリアル]** をクリックします。 
    * この資産に **M_ChessBoard** という名前を付けて、**ChessAssets** フォルダーに保存します。 

![新しいマテリアルを作成する](images/unreal-uxt/2-newmat.PNG)

6.  マテリアル エディターを開くには、**M_ChessBoard** マテリアルのイメージをダブルクリックします。 

![マテリアル エディターを開く](images/unreal-uxt/2-material-editor.PNG)

7. マテリアル エディターで右クリックして、 **[Texture Sample]\(テクスチャ サンプル\)** を検索します。 
    * **[詳細]** パネルの **[Material Expression Texture Base]\(マテリアル式テクスチャ ベース\)** セクションを展開し、 **[テクスチャ]** を **ChessBoard_Albedo** に設定します。 
    * **[RGB]** 出力ピンを **M_ChessBoard** の [Base Color]\(基本色\) ピンにドラッグします。 

![基本色を設定する](images/unreal-uxt/2-boardalbedomat.PNG)

8.  前の手順をさらに 4 回繰り返して、次の設定でさらに 4 つの **[テクスチャ サンプル]** ノードを作成します。
    * **[テクスチャ]** を **ChessBoard_AO** に設定し、**RGB** を **[アンビエント オクルージョン]** ピンにリンクします。
    * **[テクスチャ]** を **ChessBoard_Metal** に設定し、**RGB** を **[メタリック]** ピンにリンクします。 
    * **[テクスチャ]** を **ChessBoard_Normal** に設定し、**RGB** を **[ノーマル]** ピンにリンクします。
    * **[テクスチャ]** を **ChessBoard_Rough** に設定し、**RGB** を **[ラフネス]** ピンにリンクします。 
    * **[Save]** (保存) をクリックします。 

![残りのテクスチャを接続する](images/unreal-uxt/2-boardmat.PNG)

続行する前に、マテリアルの設定が上のスクリーンショットのようになっていることを確認してください。

## <a name="populating-the-scene"></a>シーンへのデータの読み込み
**[ボード]** ブループリントに戻ると、作成したばかりのマテリアルが適用されていることがわかります。 あとは、シーンをセットアップするだけです。 最初に、以下のプロパティを変更して、ボードが適切なサイズであり、シーンに配置されたときに角度が適切であることを確認します。
1.  **[スケール]** を **(0.05、0.05、0.05)** に設定し、 **[Z 回転]** を **90** に設定します。 
    * 上部のツールバーの **[コンパイル]** をクリックし、 **[保存]** をクリックして、メイン ウィンドウに戻ります。 

![マテリアルが適用されたチェス盤](images/unreal-uxt/2-chessboard.PNG)

2.  **[キューブ] > [編集] > [削除]** を右クリックして、 **[ボード]** を **[コンテンツ ブラウザー]** からビューポートにドラッグします。 
    * **[位置]** を **X = 80**、**Y = 0**、および **Z = -20** に設定します。 

3.  **[Play]\(プレイ\)** ボタンをクリックして、新しいチェス盤をレベルに表示します。 **Esc** キーを押してエディターに戻ります。 

次に、ボードで行ったのと同じ手順に従って、チェスの駒を作成します。

1. **[ブループリント]** フォルダーに移動し、右クリックして **[ブループリント クラス]** を選択し、 **[アクター]** を選択します。 このアクターに **WhiteKing** という名前を付けます。

2. **WhiteKing** をダブルクリックしてブループリント エディターで開き、 **[コンポーネントの追加] > [シーン]** をクリックして、**Root** という名前を付けます。 
    * **Root** を **DefaultSceneRoot** にドラッグアンドドロップして置換します。 

3. **[コンポーネントの追加]> [スタティック メッシュ]** をクリックし、**SM_King** という名前を付けます。 
    * [詳細] パネルで、 **[Static Mesh]\(スタティック メッシュ\)** を **Chess_King** に設定し、 **[Material]\(マテリアル\)** を、**M_ChessWhite**という名前の新しいマテリアルに設定します。 

4. マテリアル エディターで、**M_ChessWhite** を開き、次の **[テクスチャ サンプル]** ノードを次のものに接続します。
    * **[テクスチャ]** を **ChessWhite_AO** に設定し、**RGB** を **[アンビエント オクルージョン]** ピンにリンクします。
    * **[テクスチャ]** を **ChessWhite_Metal** に設定し、**RGB** を **[メタリック]** ピンにリンクします。 
    * **[テクスチャ]** を **ChessWhite_Normal** に設定し、**RGB** を **[ノーマル]** ピンにリンクします。
    * **[テクスチャ]** を **ChessWhite_Rough** に設定し、**RGB** を **[ラフネス]** ピンにリンクします。 
    * **[Save]** (保存) をクリックします。 

続行する前に、**M_ChessKing** マテリアルは次の図のようになります。

![チェスのキングのマテリアルを作成する](images/unreal-uxt/2-chesskingmat.PNG)

もう少しで完了です。あとは新しいチェスの駒をシーンに追加するだけです。 

1. **WhiteKing** ブループリントを開いて、 **[Scale]\(スケール\)** を **(0.05, 0.05, 0.05)** に、 **[Z 回転]** を **90** に変更します。
    * ブループリントをコンパイルして保存した後、メイン ウィンドウに戻ります。 

2.  **WhiteKing** をビューポートにドラッグし、 **[ワールド アウトライナー]** パネルに切り替え、**WhiteKing** を **[ボード]** にドラッグして、子オブジェクトにします。

![[World Outliner]\(ワールド アウトライナー\)](images/unreal-uxt/2-child.PNG)

3.  **[詳細]** パネルの **[Transform]\(トランスフォーム\)** で、**WhiteKing** の **[Location]\(位置\)** を **X = -26**、**Y = 4**、**Z = 0** に設定します。

これでおしまいです! **[再生]** をクリックして、データ設定されているレベルの動作を確認し、終了する準備ができたら **Esc** を押します。 このチュートリアルでは、単純なプロジェクトを作成するための多くの基本について説明しましたが、プロジェクトはシリーズの次の部分である「複合現実の設定」に進む準備ができています。 

[次のセクション: 3.Mixed Reality 用のプロジェクト設定](unreal-uxt-ch3.md)
