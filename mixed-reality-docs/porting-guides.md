---
title: 移植ガイド
description: 既存のイマーシブアプリケーションを Windows Mixed Reality に移植する手順を説明したチュートリアルです。
author: JBrentJ
ms.author: alexturn
ms.date: 07/07/2020
ms.topic: article
keywords: ポート、移植、unity、ミドルウェア、エンジン、UWP、Win32
ms.openlocfilehash: a1e3cd47096d728091d62d6c038bf6b2eb6bab16
ms.sourcegitcommit: 0eb99fae933d4374af2c032af4e9ceda1807e532
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/09/2020
ms.locfileid: "86156773"
---
# <a name="porting-guides"></a><span data-ttu-id="d705a-104">移植ガイド</span><span class="sxs-lookup"><span data-stu-id="d705a-104">Porting guides</span></span>

## <a name="overview"></a><span data-ttu-id="d705a-105">概要</span><span class="sxs-lookup"><span data-stu-id="d705a-105">Overview</span></span>

<span data-ttu-id="d705a-106">Windows 10 には、イマーシブおよび holographic ヘッドセットの直接サポートが含まれています。</span><span class="sxs-lookup"><span data-stu-id="d705a-106">Windows 10 includes direct support for immersive and holographic headsets.</span></span> <span data-ttu-id="d705a-107">Oculus Rift や HTC Naopak など、他のデバイス用にコンテンツを構築した場合は、オペレーティングシステムのプラットフォーム API の上に存在するライブラリに依存関係があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-107">If you've built content for other devices, such as the Oculus Rift or HTC Vive, these have dependencies on libraries that exist above the operating system's platform API.</span></span> <span data-ttu-id="d705a-108">既存のコンテンツを Windows Mixed Reality に取り込むには、これらの他の Sdk を Windows Api に再ターゲット使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-108">Bringing existing content over to Windows Mixed Reality involves retargeting usage of these other SDKs to the Windows APIs.</span></span> <span data-ttu-id="d705a-109">[Mixed reality 用の Windows プラットフォーム api](https://docs.microsoft.com/uwp/api/Windows.Perception)は、Win32 とユニバーサル WINDOWS プラットフォーム (UWP) アプリモデルの両方で動作します。</span><span class="sxs-lookup"><span data-stu-id="d705a-109">The [Windows platform APIs for mixed reality](https://docs.microsoft.com/uwp/api/Windows.Perception) work with both the Win32 and the Universal Windows Platform (UWP) app model.</span></span> <span data-ttu-id="d705a-110">アプリが UWP 用にまだ構築されていない場合は、UWP への変更が移植エクスペリエンスの一部になります。</span><span class="sxs-lookup"><span data-stu-id="d705a-110">If your app isn't already built for UWP, changing over to UWP will be part of the porting experience.</span></span>

## <a name="porting-overview"></a><span data-ttu-id="d705a-111">移植の概要</span><span class="sxs-lookup"><span data-stu-id="d705a-111">Porting overview</span></span>

<span data-ttu-id="d705a-112">大まかに言えば、既存のコンテンツの移植には次の手順が関係します。</span><span class="sxs-lookup"><span data-stu-id="d705a-112">At a high level, the following steps are involved in porting existing content:</span></span>
1. <span data-ttu-id="d705a-113">**PC で Windows 10 の秋の作成者の更新プログラム (16299) が実行されていることを確認します。**</span><span class="sxs-lookup"><span data-stu-id="d705a-113">**Make sure your PC is running the Windows 10 Fall Creators Update (16299).**</span></span> <span data-ttu-id="d705a-114">内部からのプレビュービルドを受信することはお勧めできなくなりました。これらのビルドは、mixed reality 開発では最も安定していないためです。</span><span class="sxs-lookup"><span data-stu-id="d705a-114">We no longer recommend receiving preview builds from the Insider Skip Ahead ring, as those builds won't be the most stable for mixed reality development.</span></span>
2. <span data-ttu-id="d705a-115">**グラフィックスまたはゲームエンジンの最新バージョンにアップグレードします。**</span><span class="sxs-lookup"><span data-stu-id="d705a-115">**Upgrade to the latest version of your graphics or game engine.**</span></span> <span data-ttu-id="d705a-116">ゲームエンジンは、Windows 10 SDK バージョン 10.0.15063.0 (2017 年4月にリリース) 以降をサポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-116">Game engines will need to support the Windows 10 SDK version 10.0.15063.0 (released in April 2017) or higher.</span></span>
3. <span data-ttu-id="d705a-117">**任意のミドルウェア、プラグイン、またはコンポーネントをアップグレードします。**</span><span class="sxs-lookup"><span data-stu-id="d705a-117">**Upgrade any middleware, plug-ins, or components.**</span></span> <span data-ttu-id="d705a-118">アプリにコンポーネントが含まれている場合は、最新バージョンにアップグレードすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d705a-118">If your app contains any components, it's a good idea to upgrade to the latest version.</span></span> <span data-ttu-id="d705a-119">最も一般的なプラグインの新しいバージョンでは、UWP がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="d705a-119">Newer versions of most common plug-ins have support for UWP.</span></span>
4. <span data-ttu-id="d705a-120">**重複する sdk の依存関係を削除**します。</span><span class="sxs-lookup"><span data-stu-id="d705a-120">**Remove dependencies on duplicate SDKs**.</span></span> <span data-ttu-id="d705a-121">コンテンツがターゲットとしているデバイスによっては、その SDK を削除するか条件付きでコンパイルする必要があります (たとえば、SteamVR)。そのため、代わりに Windows Api を対象にすることができます。</span><span class="sxs-lookup"><span data-stu-id="d705a-121">Depending on which device your content was targeting, you'll need to remove or conditionally compile out that SDK (for example, SteamVR) so you can target the Windows APIs instead.</span></span>
5. <span data-ttu-id="d705a-122">**ビルドの問題を解決します。**</span><span class="sxs-lookup"><span data-stu-id="d705a-122">**Work through build issues.**</span></span> <span data-ttu-id="d705a-123">この時点で、移植の演習は、アプリ、エンジン、およびコンポーネントの依存関係に固有です。</span><span class="sxs-lookup"><span data-stu-id="d705a-123">At this point, the porting exercise is specific to your app, your engine, and the component dependencies you have.</span></span>

## <a name="common-porting-steps"></a><span data-ttu-id="d705a-124">一般的な移植手順</span><span class="sxs-lookup"><span data-stu-id="d705a-124">Common porting steps</span></span>

### <a name="common-step-1-make-sure-you-have-the-right-development-hardware"></a><span data-ttu-id="d705a-125">一般的な手順 1: 適切な開発ハードウェアがあることを確認する</span><span class="sxs-lookup"><span data-stu-id="d705a-125">Common step 1: Make sure you have the right development hardware</span></span>

<span data-ttu-id="d705a-126">[[ツールのインストール](install-the-tools.md#for-immersive-vr-headset-development)] ページに、推奨される開発ハードウェアの一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="d705a-126">The [install the tools](install-the-tools.md#for-immersive-vr-headset-development) page lists the recommended development hardware.</span></span>

### <a name="common-step-2-upgrade-to-the-latest-flight-of-windows-10"></a><span data-ttu-id="d705a-127">一般的な手順 2: Windows 10 の最新のフライトにアップグレードする</span><span class="sxs-lookup"><span data-stu-id="d705a-127">Common step 2: Upgrade to the latest flight of Windows 10</span></span>

<span data-ttu-id="d705a-128">Windows Mixed Reality プラットフォームは、まだアクティブな開発中です。</span><span class="sxs-lookup"><span data-stu-id="d705a-128">The Windows Mixed Reality platform is still under active development.</span></span> <span data-ttu-id="d705a-129">"Windows Insider Fast" のフライトにアクセスするには[、Windows Insider program に参加](https://insider.windows.com/)することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d705a-129">We recommend [joining the Windows Insider Program](https://insider.windows.com/) to access the "Windows Insider Fast" flight.</span></span>
1. <span data-ttu-id="d705a-130">Windows 10 の作成者の[更新プログラム](https://www.microsoft.com/software-download/windows10)をインストールする</span><span class="sxs-lookup"><span data-stu-id="d705a-130">Install the [Windows 10 Creators Update](https://www.microsoft.com/software-download/windows10)</span></span>
2. <span data-ttu-id="d705a-131">Windows Insider プログラムに[参加](https://insider.windows.com/)します。</span><span class="sxs-lookup"><span data-stu-id="d705a-131">[Join](https://insider.windows.com/) the Windows Insider Program.</span></span>
3. <span data-ttu-id="d705a-132">[開発者モード](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)を有効にする</span><span class="sxs-lookup"><span data-stu-id="d705a-132">Enable [Developer Mode](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span></span>
4. <span data-ttu-id="d705a-133">[**設定 > 更新 & セキュリティ] セクション**で、 [Windows Insider Fast のフライト](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview)に切り替えます。</span><span class="sxs-lookup"><span data-stu-id="d705a-133">Switch to the [Windows Insider Fast flights](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview) through **Settings > Update & Security Section**</span></span>

### <a name="common-step-3-upgrade-to-the-most-recent-build-of-visual-studio-uwp-only"></a><span data-ttu-id="d705a-134">一般的な手順 3: Visual Studio の最新のビルドにアップグレードする (UWP のみ)</span><span class="sxs-lookup"><span data-stu-id="d705a-134">Common step 3: Upgrade to the most recent build of Visual Studio (UWP only)</span></span>
* <span data-ttu-id="d705a-135">「Visual Studio 2019 で[のツールページのインストール」を](install-the-tools.md#installation-checklist)参照してください。</span><span class="sxs-lookup"><span data-stu-id="d705a-135">See [Install the tools](install-the-tools.md#installation-checklist) page under Visual Studio 2019</span></span>

### <a name="common-step-4-be-ready-for-the-store-uwp-only"></a><span data-ttu-id="d705a-136">共通手順 4: ストアの準備ができている (UWP のみ)</span><span class="sxs-lookup"><span data-stu-id="d705a-136">Common step 4: Be Ready for The Store (UWP only)</span></span>
* <span data-ttu-id="d705a-137">[Windows アプリ認定キット](https://developer.microsoft.com/windows/develop/app-certification-kit)(wack とも呼ばれます) を早期および頻繁に使用します。</span><span class="sxs-lookup"><span data-stu-id="d705a-137">Use [Windows App Certification Kit](https://developer.microsoft.com/windows/develop/app-certification-kit) (also known as WACK) early and often!</span></span>
* <span data-ttu-id="d705a-138">[移植性アナライザー](https://docs.microsoft.com/dotnet/standard/portability-analyzer) ([ダウンロード](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer)) を使用する</span><span class="sxs-lookup"><span data-stu-id="d705a-138">Use [Portability Analyzer](https://docs.microsoft.com/dotnet/standard/portability-analyzer) ([Download](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer))</span></span>

### <a name="common-step-5-choose-the-correct-adapter"></a><span data-ttu-id="d705a-139">一般的な手順 5: 正しいアダプターを選択する</span><span class="sxs-lookup"><span data-stu-id="d705a-139">Common step 5: Choose the correct Adapter</span></span>
* <span data-ttu-id="d705a-140">2つの Gpu を持つ notebook などのシステムでは、[正しいアダプターをターゲット](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications)にします。</span><span class="sxs-lookup"><span data-stu-id="d705a-140">In systems like notebooks with two GPUs, [target the correct adapter](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications).</span></span> <span data-ttu-id="d705a-141">これは、Unity とネイティブ DirectX アプリに適用されます。 ID3D11Device は、明示的に、または暗黙的に (メディアファンデーション) 機能に対して作成されます。</span><span class="sxs-lookup"><span data-stu-id="d705a-141">This applies to Unity and native DirectX apps where a ID3D11Device is created, either explicitly or implicitly (Media Foundation), for its functionality.</span></span>

## <a name="unity-porting-guidance"></a><span data-ttu-id="d705a-142">Unity の移植に関するガイダンス</span><span class="sxs-lookup"><span data-stu-id="d705a-142">Unity porting guidance</span></span>

### <a name="unity-step-1-follow-the-common-porting-steps"></a><span data-ttu-id="d705a-143">Unity 手順 1: 一般的な移植手順に従う</span><span class="sxs-lookup"><span data-stu-id="d705a-143">Unity step 1: Follow the common porting steps</span></span>

<span data-ttu-id="d705a-144">すべての一般的な手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="d705a-144">Follow all of the common steps.</span></span> <span data-ttu-id="d705a-145">手順 #3 で、[ **Unity を使用したゲーム開発**] ワークロードを選択します。</span><span class="sxs-lookup"><span data-stu-id="d705a-145">When in step #3, select the **Game Development with Unity** workload.</span></span> <span data-ttu-id="d705a-146">以下の手順から新しいバージョンの Unity をインストールするため、Unity エディターのオプションコンポーネントを選択解除することができます。</span><span class="sxs-lookup"><span data-stu-id="d705a-146">You may deselect the Unity Editor optional component since you'll be installing a newer version of Unity from the instructions below.</span></span>

### <a name="unity-step-2-upgrade-to-the-latest-public-build-of-unity-with-windows-mr-support"></a><span data-ttu-id="d705a-147">Unity 手順 2: Windows MR サポートを使用して Unity の最新のパブリックビルドにアップグレードする</span><span class="sxs-lookup"><span data-stu-id="d705a-147">Unity step 2: Upgrade to the latest public build of Unity with Windows MR Support</span></span>
1. <span data-ttu-id="d705a-148">Mixed reality サポートを使用して、 [Unity の最新の推奨パブリックビルド](install-the-tools.md)をダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="d705a-148">Download the latest [recommended public build of Unity](install-the-tools.md) with mixed reality support.</span></span>
2. <span data-ttu-id="d705a-149">作業を開始する前にプロジェクトのコピーを保存する</span><span class="sxs-lookup"><span data-stu-id="d705a-149">Save a copy of your project before you get started</span></span>
3. <span data-ttu-id="d705a-150">移植時に Unity から入手できる[ドキュメント](https://docs.unity3d.com/Manual/UpgradeGuides.html)を確認します。</span><span class="sxs-lookup"><span data-stu-id="d705a-150">Review the [documentation](https://docs.unity3d.com/Manual/UpgradeGuides.html) available from Unity on porting.</span></span>
4. <span data-ttu-id="d705a-151">Unity のサイトで自動 API アップデーターを使用する[手順](https://docs.unity3d.com/Manual/APIUpdater.html)に従います。</span><span class="sxs-lookup"><span data-stu-id="d705a-151">Follow the [instructions](https://docs.unity3d.com/Manual/APIUpdater.html) on Unity's site for using their automatic API updater</span></span>
5. <span data-ttu-id="d705a-152">プロジェクトを実行するために必要な追加の変更があるかどうかを確認し、残りのエラーと警告を解決します。</span><span class="sxs-lookup"><span data-stu-id="d705a-152">Check and see if there are additional changes that you need to make to get your project running, and work through any remaining errors and warnings.</span></span> 

> [!Note] 
> <span data-ttu-id="d705a-153">依存しているミドルウェアがある場合は、最新のリリースを使用していることを確認してください (以下の手順 3. の詳細)。</span><span class="sxs-lookup"><span data-stu-id="d705a-153">If you have middleware that you depend on, check that you're using the latest release (more details in step 3 below).</span></span>

### <a name="unity-step-3-upgrade-your-middleware-to-the-latest-versions"></a><span data-ttu-id="d705a-154">Unity 手順 3: ミドルウェアを最新バージョンにアップグレードする</span><span class="sxs-lookup"><span data-stu-id="d705a-154">Unity step 3: Upgrade your middleware to the latest versions</span></span>

<span data-ttu-id="d705a-155">Unity の更新プログラムでは、ゲームまたはアプリケーションが依存している1つ以上のミドルウェアパッケージを更新することが必要になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-155">With any Unity update, there's a good chance that you'll need to update one or more middleware packages that your game or application depends on.</span></span> <span data-ttu-id="d705a-156">さらに、最新のミドルウェアで最新の状態になると、移植プロセスの残りの部分全体で成功の可能性が高まります。</span><span class="sxs-lookup"><span data-stu-id="d705a-156">Additionally, being up to date with the latest middleware increases the likelihood of success throughout the rest of the porting process.</span></span> <span data-ttu-id="d705a-157">最近、多くのミドルウェアパッケージでユニバーサル Windows プラットフォーム (UWP) のサポートが追加され、最新バージョンにアップグレードすると、その作業を利用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="d705a-157">Many middleware packages have recently added support for Universal Windows Platform (UWP), and upgrading to the most recent versions will let you leverage that work.</span></span>

### <a name="unity-step-4-target-your-application-to-run-on-universal-windows-platform-uwp"></a><span data-ttu-id="d705a-158">Unity 手順 4: ユニバーサル Windows プラットフォーム (UWP) で実行するようにアプリケーションをターゲットにする</span><span class="sxs-lookup"><span data-stu-id="d705a-158">Unity step 4: Target your application to run on Universal Windows Platform (UWP)</span></span>

<span data-ttu-id="d705a-159">Win32 を対象としている場合は、この手順をスキップして手順 5. に進むことができます。</span><span class="sxs-lookup"><span data-stu-id="d705a-159">If you're targeting Win32, you can skip this step and continue to step 5.</span></span>

<span data-ttu-id="d705a-160">ツールをインストールしたら、アプリをユニバーサル Windows アプリとして実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-160">After installing the tools, you need to get your app running as a Universal Windows app.</span></span>

* <span data-ttu-id="d705a-161">Unity によって提供される[詳細な手順に](https://unity3d.com/partners/microsoft/porting-guides)従ってください。</span><span class="sxs-lookup"><span data-stu-id="d705a-161">Follow the [detailed step by step walk through](https://unity3d.com/partners/microsoft/porting-guides) provided by Unity.</span></span> <span data-ttu-id="d705a-162">Windows MR の最新の LTS リリース (20xx リリース) をご確認ください。</span><span class="sxs-lookup"><span data-stu-id="d705a-162">You should stay on the latest LTS release (any 20xx.4 release) for Windows MR.</span></span>
* <span data-ttu-id="d705a-163">UWP 開発リソースの詳細については、「 [Windows 10 ゲーム開発ガイド」](https://docs.microsoft.com/windows/uwp/gaming/e2e)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d705a-163">For more UWP development resources, take a look at the [Windows 10 game development guide](https://docs.microsoft.com/windows/uwp/gaming/e2e).</span></span>

> [!NOTE]
> <span data-ttu-id="d705a-164">Unity は引き続き IL2CPP サポートを強化します。IL2CPP は、いくつかの UWP ポートを簡単にします。</span><span class="sxs-lookup"><span data-stu-id="d705a-164">Unity continues to improve IL2CPP support; IL2CPP makes some UWP ports easier.</span></span> <span data-ttu-id="d705a-165">.NET scripting バックエンドを現在対象としている場合は、代わりに IL2CPP バックエンドを活用するように変換することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="d705a-165">If you are currently targeting the .NET scripting backend, you should consider converting to leverage the IL2CPP backend instead.</span></span>

* <span data-ttu-id="d705a-166">Win32 ではなく UWP を対象としているため、"Unity 手順 5" はスキップできます。</span><span class="sxs-lookup"><span data-stu-id="d705a-166">You can skip "Unity step 5" since you're targeting UWP instead of Win32.</span></span>

> [!NOTE] 
> <span data-ttu-id="d705a-167">アプリケーションがデバイス固有のサービスに依存している場合 (ストリームからの照合など)、この手順で無効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-167">If your application has any dependencies on device-specific services, such as match making from Steam, you'll need to disable them at this step.</span></span> <span data-ttu-id="d705a-168">後で Windows が提供する同等のサービスにフックできます。</span><span class="sxs-lookup"><span data-stu-id="d705a-168">You can hook up to the equivalent services that Windows provides later on.</span></span>

### <a name="unity-step-5-target-your-application-to-run-on-win32"></a><span data-ttu-id="d705a-169">Unity 手順 5: Win32 で実行するようにアプリケーションをターゲットにする</span><span class="sxs-lookup"><span data-stu-id="d705a-169">Unity step 5: Target your application to run on Win32</span></span>

<span data-ttu-id="d705a-170">Unity アプリケーション内から:</span><span class="sxs-lookup"><span data-stu-id="d705a-170">From inside your Unity application:</span></span>

* <span data-ttu-id="d705a-171">ファイル > のビルド設定に移動します</span><span class="sxs-lookup"><span data-stu-id="d705a-171">Navigate to File -> Build Settings</span></span>
* <span data-ttu-id="d705a-172">[PC、Mac、Linux スタンドアロン] を選択します。</span><span class="sxs-lookup"><span data-stu-id="d705a-172">Select "PC, Mac, Linux Standalone"</span></span>
* <span data-ttu-id="d705a-173">ターゲットプラットフォームを "Windows" に設定します</span><span class="sxs-lookup"><span data-stu-id="d705a-173">Set target platform to "Windows"</span></span>
* <span data-ttu-id="d705a-174">アーキテクチャを "x86" に設定し、[プラットフォームの切り替え] を選択します。</span><span class="sxs-lookup"><span data-stu-id="d705a-174">Set architecture to "x86" Select "Switch Platform"</span></span>


### <a name="unity-step-6-setup-your-windows-mixed-reality-hardware"></a><span data-ttu-id="d705a-175">Unity 手順 6: Windows Mixed Reality ハードウェアをセットアップする</span><span class="sxs-lookup"><span data-stu-id="d705a-175">Unity step 6: Setup your Windows Mixed Reality hardware</span></span>
1. <span data-ttu-id="d705a-176">[イマーシブヘッドセットのセットアップ](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)の手順を確認する</span><span class="sxs-lookup"><span data-stu-id="d705a-176">Review steps in [Immersive headset setup](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span></span>
2. <span data-ttu-id="d705a-177">[Windows Mixed reality シミュレーターを使用する](using-the-windows-mixed-reality-simulator.md)方法と[windows mixed Reality ホームを移動](navigating-the-windows-mixed-reality-home.md)する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d705a-177">Learn about [Using the Windows Mixed Reality simulator](using-the-windows-mixed-reality-simulator.md) and [Navigating the Windows Mixed Reality home](navigating-the-windows-mixed-reality-home.md)</span></span>

### <a name="unity-step-7-target-your-application-to-run-on-windows-mixed-reality"></a><span data-ttu-id="d705a-178">Unity 手順 7: Windows Mixed Reality で実行するようにアプリケーションをターゲットにする</span><span class="sxs-lookup"><span data-stu-id="d705a-178">Unity step 7: Target your application to run on Windows Mixed Reality</span></span>
1. <span data-ttu-id="d705a-179">まず、特定の VR SDK に固有の他のライブラリサポートを削除するか、条件に応じてコンパイルする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-179">First, you must remove or conditionally compile out any other library support specific to a particular VR SDK.</span></span> <span data-ttu-id="d705a-180">これらの資産は、Windows Mixed Reality などの他の VR Sdk と互換性のない方法でプロジェクトの設定とプロパティを頻繁に変更します。</span><span class="sxs-lookup"><span data-stu-id="d705a-180">Those assets frequently change settings and properties on your project in ways that are incompatible with other VR SDKs, such as Windows Mixed Reality.</span></span>
    * <span data-ttu-id="d705a-181">たとえば、プロジェクトが SteamVR SDK を参照している場合は、Windows ストアビルドターゲットのエクスポート時に、プロジェクトを更新して、prefabs と script API 呼び出しを除外する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-181">For example, if your project references the SteamVR SDK, you'll need to update your project to exclude those prefabs and script API calls when exporting for the Windows Store build target.</span></span>
    * <span data-ttu-id="d705a-182">条件付きで他の VR Sdk を除外するための具体的な手順は近日対応予定です。</span><span class="sxs-lookup"><span data-stu-id="d705a-182">Specific steps for conditionally excluding other VR SDKs are coming soon.</span></span>
2. <span data-ttu-id="d705a-183">Unity プロジェクトで、 [Windows 10 SDK を対象とする](holograms-100.md#target-windows-10-sdk)</span><span class="sxs-lookup"><span data-stu-id="d705a-183">In your Unity project, [target the Windows 10 SDK](holograms-100.md#target-windows-10-sdk)</span></span>
3. <span data-ttu-id="d705a-184">シーンごとに、[カメラを設定します](holograms-100.md#chapter-2---setup-the-camera)。</span><span class="sxs-lookup"><span data-stu-id="d705a-184">For each scene, [setup the camera](holograms-100.md#chapter-2---setup-the-camera)</span></span>

### <a name="unity-step-8-use-the-stage-to-place-content-on-the-floor"></a><span data-ttu-id="d705a-185">Unity 手順 8: ステージを使用して、床にコンテンツを配置する</span><span class="sxs-lookup"><span data-stu-id="d705a-185">Unity step 8: Use the stage to place content on the floor</span></span>

<span data-ttu-id="d705a-186">さまざまな[エクスペリエンススケール](coordinate-systems.md)にわたって、混合した現実のエクスペリエンスを構築できます。</span><span class="sxs-lookup"><span data-stu-id="d705a-186">You can build Mixed Reality experiences across a wide range of [experience scales](coordinate-systems.md).</span></span>

<span data-ttu-id="d705a-187">取り付けられている**スケールエクスペリエンス**を移植する場合は、Unity が**固定**の追跡領域の種類に設定されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-187">If you're porting a **seated-scale experience**, you must ensure Unity is set to the **Stationary** tracking space type:</span></span>

```cs
XRDevice.SetTrackingSpaceType(TrackingSpaceType.Stationary);
```

<span data-ttu-id="d705a-188">上記のコードでは、Unity のワールド座標系を設定して、[参照の静止フレーム](coordinate-systems.md#spatial-coordinate-systems)を追跡します。</span><span class="sxs-lookup"><span data-stu-id="d705a-188">This above code sets Unity's world coordinate system to track the [stationary frame of reference](coordinate-systems.md#spatial-coordinate-systems).</span></span> <span data-ttu-id="d705a-189">静止の追跡モードでは、アプリの起動時に、カメラの既定の場所 (フォワードが Z) の前にエディターに配置されたコンテンツがユーザーの前に表示されます。</span><span class="sxs-lookup"><span data-stu-id="d705a-189">In the Stationary tracking mode, content placed in the editor just in front of the camera's default location (forward is -Z) appears in front of the user when the app launches.</span></span> <span data-ttu-id="d705a-190">ユーザーが recenter した元の位置を確認するには、Unity の XR を呼び出すことができ[ます。InputTracking. Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html)メソッド。</span><span class="sxs-lookup"><span data-stu-id="d705a-190">To recenter the user's seated origin, you can call Unity's [XR.InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) method.</span></span>

<span data-ttu-id="d705a-191">継続的な**スケールエクスペリエンス**または**ルームスケールエクスペリエンス**を移植している場合は、フロアを基準にコンテンツを配置します。</span><span class="sxs-lookup"><span data-stu-id="d705a-191">If you're porting a **standing-scale experience** or **room-scale experience**, you'll be placing content relative to the floor.</span></span> <span data-ttu-id="d705a-192">ユーザーが定義したフロアレベルのオリジンとオプションの部屋の境界を表す**[空間ステージ](coordinate-systems.md#spatial-coordinate-systems)** を使用して、ユーザーのフロアについては、最初の実行時に設定します。</span><span class="sxs-lookup"><span data-stu-id="d705a-192">You reason about the user's floor using the **[spatial stage](coordinate-systems.md#spatial-coordinate-systems)**, which represents the user's defined floor-level origin and optional room boundary, set up during first run.</span></span> <span data-ttu-id="d705a-193">これらのエクスペリエンスについては、Unity が**RoomScale**の追跡領域の種類に設定されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-193">For these experiences, you must ensure Unity is set to the **RoomScale** tracking space type.</span></span> <span data-ttu-id="d705a-194">RoomScale が既定値であるのに対し、明示的に設定して、ユーザーが自分のコンピューターを調整した部屋から離れた状況を検出するために、true に戻すことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d705a-194">While RoomScale is the default, you'll want to set it explicitly and ensure you get back true, to catch situations where the user has moved their computer away from the room they calibrated:</span></span>

```cs
if (XRDevice.SetTrackingSpaceType(TrackingSpaceType.RoomScale))
{
    // RoomScale mode was set successfully.  App can now assume that y=0 in Unity world coordinate represents the floor.
}
else
{
    // RoomScale mode was not set successfully.  App cannot make assumptions about where the floor plane is.
}
```

<span data-ttu-id="d705a-195">アプリで RoomScale の追跡領域の種類が正常に設定されると、y = 0 平面に配置されたコンテンツがフロア上に表示されます。</span><span class="sxs-lookup"><span data-stu-id="d705a-195">Once your app successfully sets the RoomScale tracking space type, content placed on the y=0 plane will appear on the floor.</span></span> <span data-ttu-id="d705a-196">(0, 0, 0) の原点は、部屋のセットアップ中にユーザーがそこしたフロア上の特定の場所になります。これは、セットアップ中に接続されていた前方方向を表す-Z です。</span><span class="sxs-lookup"><span data-stu-id="d705a-196">The origin at (0, 0, 0) will be the specific place on the floor where the user stood during room setup, with -Z representing the forward direction they were facing during setup.</span></span>

<span data-ttu-id="d705a-197">スクリプトコードでは、TrackedArea の境界の種類を指定して、境界ポリゴンを取得するために、XR 型の TryGetGeometry メソッドを呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="d705a-197">In script code, you can then call the TryGetGeometry method on you're the UnityEngine.Experimental.XR.Boundary type to get a boundary polygon, specifying a boundary type of TrackedArea.</span></span> <span data-ttu-id="d705a-198">ユーザーが境界を定義している場合 (頂点の一覧を取得した場合)、ユーザーに**ルームスケールエクスペリエンス**を提供し、ユーザーが作成したシーンを周囲にたどることができます。</span><span class="sxs-lookup"><span data-stu-id="d705a-198">If the user defined a boundary (you get back a list of vertices), it's safe to deliver a **room-scale experience** to the user, where they can walk around the scene you create.</span></span>

<span data-ttu-id="d705a-199">ユーザーがこの境界に近づいたときに、境界が自動的に表示されます。</span><span class="sxs-lookup"><span data-stu-id="d705a-199">The system will automatically render the boundary when the user approaches it.</span></span> <span data-ttu-id="d705a-200">アプリでは、境界自体をレンダリングするためにこの多角形を使用する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d705a-200">Your app does not need to use this polygon to render the boundary itself.</span></span>

<span data-ttu-id="d705a-201">詳細については、「 [Unity の座標系](coordinate-systems-in-unity.md)」ページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="d705a-201">For more information, see the [Coordinate systems in Unity](coordinate-systems-in-unity.md) page.</span></span>

<span data-ttu-id="d705a-202">一部のアプリケーションでは、四角形を使用して相互作用を制限しています。</span><span class="sxs-lookup"><span data-stu-id="d705a-202">Some applications use a rectangle to constrain their interaction.</span></span> <span data-ttu-id="d705a-203">多くのものを持つ四角形を取得することは、UWP API または Unity で直接サポートされるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="d705a-203">Retrieving the largest inscribed rectangle is not directly supported in the UWP API or Unity.</span></span> <span data-ttu-id="d705a-204">次にリンクされているコード例では、トレースされた境界内で四角形を検索する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="d705a-204">The example code linked to below shows how to find a rectangle within the traced bounds.</span></span> <span data-ttu-id="d705a-205">これはヒューリスティックベースであるため、最適なソリューションを見つけることができない場合がありますが、結果は期待どおりであると考えられます。</span><span class="sxs-lookup"><span data-stu-id="d705a-205">It's heuristic-based so may not find the optimal solution, however, results are consistent with expectations.</span></span> <span data-ttu-id="d705a-206">アルゴリズムのパラメーターをチューニングして、処理時間のコストでより正確な結果を見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="d705a-206">Parameters in the algorithm can be tuned to find more precise results at the cost of processing time.</span></span> <span data-ttu-id="d705a-207">このアルゴリズムは、Unity の 5.6 preview MRTP バージョンを使用する Mixed Reality Toolkit のフォークに含まれています。</span><span class="sxs-lookup"><span data-stu-id="d705a-207">The algorithm is in a fork of the Mixed Reality Toolkit that uses the 5.6 preview MRTP version of Unity.</span></span> <span data-ttu-id="d705a-208">これは公開されていません。</span><span class="sxs-lookup"><span data-stu-id="d705a-208">This isn't publicly available.</span></span> <span data-ttu-id="d705a-209">このコードは、2017.2 以降のバージョンの Unity で直接使用できます。</span><span class="sxs-lookup"><span data-stu-id="d705a-209">The code should be directly usable in 2017.2 and higher versions of Unity.</span></span> <span data-ttu-id="d705a-210">このコードは、近い将来、現在の MRTK に移植されます。</span><span class="sxs-lookup"><span data-stu-id="d705a-210">The code will be ported to the current MRTK in the near future.</span></span>

<span data-ttu-id="d705a-211">[GitHub のコードの zip ファイル](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20)重要なファイル:</span><span class="sxs-lookup"><span data-stu-id="d705a-211">[zip file of code on GitHub](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20) Important files:</span></span>
* <span data-ttu-id="d705a-212">Assets/HoloToolkit/Stage/Scripts/StageManager-使用例</span><span class="sxs-lookup"><span data-stu-id="d705a-212">Assets/HoloToolkit/Stage/Scripts/StageManager.cs - example of usage</span></span>
* <span data-ttu-id="d705a-213">Assets/HoloToolkit/Stage/Scripts/LargestRectangle-アルゴリズムの実装</span><span class="sxs-lookup"><span data-stu-id="d705a-213">Assets/HoloToolkit/Stage/Scripts/LargestRectangle.cs - implementation of the algorithm</span></span>
* <span data-ttu-id="d705a-214">Assets/HoloToolkit-UnitTests/Editor/Stage/LargestRectangleTest-アルゴリズムの簡易テスト</span><span class="sxs-lookup"><span data-stu-id="d705a-214">Assets/HoloToolkit-UnitTests/Editor/Stage/LargestRectangleTest.cs - trivial test of the algorithm</span></span>

<span data-ttu-id="d705a-215">結果の例:</span><span class="sxs-lookup"><span data-stu-id="d705a-215">Example of results:</span></span>

![結果の例](images/largestrectangle-400px.jpg)

<span data-ttu-id="d705a-217">アルゴリズムは、Daniel Smilkov: [polygon 内の最大の四角形](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)によるブログに基づいています</span><span class="sxs-lookup"><span data-stu-id="d705a-217">Algorithm is based on a blog by Daniel Smilkov: [Largest rectangle in a polygon](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span></span>

### <a name="unity-step-9-work-through-your-input-model"></a><span data-ttu-id="d705a-218">Unity 手順 9: 入力モデルを操作する</span><span class="sxs-lookup"><span data-stu-id="d705a-218">Unity step 9: Work through your input model</span></span>

<span data-ttu-id="d705a-219">既存の HMD を対象とする各ゲームまたはアプリケーションには、処理する入力のセット、エクスペリエンスに必要な入力の種類、およびそれらの入力を取得するために呼び出す特定の Api が含まれます。</span><span class="sxs-lookup"><span data-stu-id="d705a-219">Each game or application targeting an existing HMD will have a set of inputs that it handles, types of inputs that it needs for the experience, and specific APIs that it calls to get those inputs.</span></span> <span data-ttu-id="d705a-220">Windows Mixed Reality で利用可能な入力を活用するために、可能な限りシンプルで単純なものにするために投資してきました。</span><span class="sxs-lookup"><span data-stu-id="d705a-220">We've invested in trying to make it as simple and straightforward as possible to take advantage of the inputs available in Windows Mixed Reality.</span></span>
1. <span data-ttu-id="d705a-221">詳細については、「 **[Unity の入力移植ガイド」](input-porting-guide-for-unity.md)** を参照してください。これは、Windows Mixed Reality が入力を公開する方法と、その方法がアプリケーションにどのように対応しているかについて詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="d705a-221">Read through the **[Input porting guide for Unity](input-porting-guide-for-unity.md)** for details of how Windows Mixed Reality exposes input, and how that maps to what your application may do today.</span></span>
2. <span data-ttu-id="d705a-222">Unity のクロス VR SDK 入力 API または MR 固有の入力 API を活用するかどうかを選択します。</span><span class="sxs-lookup"><span data-stu-id="d705a-222">Choose whether you're going to leverage Unity's cross-VR-SDK input API, or the MR-specific input API.</span></span> <span data-ttu-id="d705a-223">[Oculus 入力](https://docs.unity3d.com/Manual/OculusControllers.html)と[openvr 入力](https://docs.unity3d.com/Manual/OpenVRControllers.html)については、現在 Unity VR apps で使用されているのは、GetAxis api です。</span><span class="sxs-lookup"><span data-stu-id="d705a-223">The general Input.GetButton/Input.GetAxis APIs are used by Unity VR apps today for [Oculus input](https://docs.unity3d.com/Manual/OculusControllers.html) and [OpenVR input](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span></span> <span data-ttu-id="d705a-224">アプリが既にモーションコントローラー用のこれらの Api を使用している場合は、これが最も簡単なパスです。入力マネージャーでボタンと軸を再マップするだけで済みます。</span><span class="sxs-lookup"><span data-stu-id="d705a-224">If your apps are already using these APIs for motion controllers, this is the easiest path - you should just need to remap buttons and axes in the Input Manager.</span></span>
    * <span data-ttu-id="d705a-225">Unity のモーションコントローラーデータにアクセスするには、一般的な GetAxis Api または MR 固有の UnityEngine. XR Api を使用します (複数の場合があります)。</span><span class="sxs-lookup"><span data-stu-id="d705a-225">You can access motion controller data in Unity using either the general cross-VR-SDK Input.GetButton/Input.GetAxis APIs or the MR-specific UnityEngine.XR.WSA.Input APIs.</span></span> <span data-ttu-id="d705a-226">(以前は Unity 5.6 の UnityEngine. XR 名前空間にあります)</span><span class="sxs-lookup"><span data-stu-id="d705a-226">(previously in the UnityEngine.XR.WSA.Input namespace in Unity 5.6)</span></span>
    * <span data-ttu-id="d705a-227">ゲームパッドとモーションコントローラーを組み合わせた[ツールキットの例](https://github.com/Microsoft/HoloToolkit-Unity/pull/572)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d705a-227">See the [example in Toolkit](https://github.com/Microsoft/HoloToolkit-Unity/pull/572) that combines gamepad and motion controllers.</span></span>

### <a name="unity-step-10-performance-testing-and-tuning"></a><span data-ttu-id="d705a-228">Unity 手順 10: パフォーマンステストとチューニング</span><span class="sxs-lookup"><span data-stu-id="d705a-228">Unity step 10: Performance testing and tuning</span></span>

<span data-ttu-id="d705a-229">Windows Mixed Reality は、ハイエンドゲーム Pc から広範な市場メインストリーム Pc まで、さまざまな種類のデバイスで利用できます。</span><span class="sxs-lookup"><span data-stu-id="d705a-229">Windows Mixed Reality will be available on a broad class of devices, ranging from high end gaming PCs, down to broad market mainstream PCs.</span></span> <span data-ttu-id="d705a-230">対象となる市場によっては、アプリケーションに対して使用可能なコンピューティングとグラフィックの予算に大きな違いがあります。</span><span class="sxs-lookup"><span data-stu-id="d705a-230">Depending on what market you're targeting, there's a significant difference in the available compute and graphics budgets for your application.</span></span> <span data-ttu-id="d705a-231">この移植の演習では、premium PC を利用している可能性があります。また、アプリで使用できるコンピューティングとグラフィックの大きな予算があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-231">During this porting exercise, you're likely leveraging a premium PC, and have had significant compute and graphics budgets available to your app.</span></span> <span data-ttu-id="d705a-232">アプリをより広範囲のユーザーが使用できるようにする場合は、[対象とする代表的なハードウェア](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)でアプリをテストしてプロファイリングする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-232">If you wish to make your app available to a broader audience, you should test and profile your app on [the representative hardware that you wish to target](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>

<span data-ttu-id="d705a-233">[Unity](https://docs.unity3d.com/Manual/Profiler.html)と[Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index)のどちらにも、パフォーマンスプロファイラーと、パフォーマンスプロファイルと最適化に関する[Microsoft](understanding-performance-for-mixed-reality.md)と[Intel](https://software.intel.com/articles/vr-content-developer-guide)の両方の発行ガイドラインが含まれています。</span><span class="sxs-lookup"><span data-stu-id="d705a-233">Both [Unity](https://docs.unity3d.com/Manual/Profiler.html) and [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) include performance profilers, and both [Microsoft](understanding-performance-for-mixed-reality.md) and [Intel](https://software.intel.com/articles/vr-content-developer-guide) publish guidelines on performance profiling and optimization.</span></span> <span data-ttu-id="d705a-234">[混合現実のパフォーマンスを理解](understanding-performance-for-mixed-reality.md)することで、パフォーマンスに関する広範な説明があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-234">There's an extensive discussion of performance available at [Understanding Performance for Mixed Reality](understanding-performance-for-mixed-reality.md).</span></span> <span data-ttu-id="d705a-235">さらに、unity の[パフォーマンスに関する推奨事項](performance-recommendations-for-unity.md)には、unity に関する具体的な詳細があります。</span><span class="sxs-lookup"><span data-stu-id="d705a-235">Further, there are specific details for Unity under [Performance Recommendations for Unity](performance-recommendations-for-unity.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="d705a-236">関連項目</span><span class="sxs-lookup"><span data-stu-id="d705a-236">See also</span></span>
* [<span data-ttu-id="d705a-237">Unity 用入力移植ガイド</span><span class="sxs-lookup"><span data-stu-id="d705a-237">Input porting guide for Unity</span></span>](input-porting-guide-for-unity.md)
* [<span data-ttu-id="d705a-238">Windows Mixed Reality の PC ハードウェアの最小互換性ガイドライン</span><span class="sxs-lookup"><span data-stu-id="d705a-238">Windows Mixed Reality minimum PC hardware compatibility guidelines</span></span>](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)
* [<span data-ttu-id="d705a-239">Mixed Reality のパフォーマンスについて</span><span class="sxs-lookup"><span data-stu-id="d705a-239">Understanding Performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)
* [<span data-ttu-id="d705a-240">Unity のパフォーマンスに関する推奨事項</span><span class="sxs-lookup"><span data-stu-id="d705a-240">Performance Recommendations for Unity</span></span>](performance-recommendations-for-unity.md)
* [<span data-ttu-id="d705a-241">UWP のために Xbox Live サポートを Unity に追加する</span><span class="sxs-lookup"><span data-stu-id="d705a-241">Add Xbox Live support to Unity for UWP</span></span>](https://docs.microsoft.com/windows/uwp/xbox-live/get-started-with-partner/partner-add-xbox-live-to-unity-uwp)
